

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/favicon.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="qlhhahaha">
  <meta name="keywords" content="">
  
    <meta name="description" content="è¯¾ç¨‹æ¥æºï¼šStanford-CS106L(22 fall)è¯¾ç¨‹ä»‹ç»ï¼šHashMap_for_CS106L               Lecture2ã€Types and Structsä¸€ã€Types é™æ€è¯­è¨€ï¼šæœ‰åå­—çš„ä¸œè¥¿ï¼ˆå˜é‡&#x2F;å‡½æ•°ï¼‰è¦äººä¸ºç»™ç±»å‹ åŠ¨æ€è¯­è¨€ï¼šè¿è¡Œæ—¶è§£é‡Šå™¨æ ¹æ®current valueè‡ªåŠ¨ç»™ç±»å‹    Lecture3ã€Streamä¸€ã€cout">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€ŠCS106Lç¬”è®°ã€‹">
<meta property="og:url" content="https://qlhhahaha.github.io/2023/04/14/%E3%80%8ACS106L%E7%AC%94%E8%AE%B0%E3%80%8B/index.html">
<meta property="og:site_name" content="é’±åŠ›æ™–çš„å°ç«™">
<meta property="og:description" content="è¯¾ç¨‹æ¥æºï¼šStanford-CS106L(22 fall)è¯¾ç¨‹ä»‹ç»ï¼šHashMap_for_CS106L               Lecture2ã€Types and Structsä¸€ã€Types é™æ€è¯­è¨€ï¼šæœ‰åå­—çš„ä¸œè¥¿ï¼ˆå˜é‡&#x2F;å‡½æ•°ï¼‰è¦äººä¸ºç»™ç±»å‹ åŠ¨æ€è¯­è¨€ï¼šè¿è¡Œæ—¶è§£é‡Šå™¨æ ¹æ®current valueè‡ªåŠ¨ç»™ç±»å‹    Lecture3ã€Streamä¸€ã€cout">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://qlhhahaha.github.io/img/CS106L.png">
<meta property="article:published_time" content="2023-04-13T16:00:00.000Z">
<meta property="article:modified_time" content="2023-04-15T08:02:33.175Z">
<meta property="article:author" content="qlhhahaha">
<meta property="article:tag" content="c++">
<meta property="article:tag" content="æ–¯å¦ç¦">
<meta property="article:tag" content="hashmap">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://qlhhahaha.github.io/img/CS106L.png">
  
  
  
  <title>ã€ŠCS106Lç¬”è®°ã€‹ - é’±åŠ›æ™–çš„å°ç«™</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"qlhhahaha.github.io","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"kycRyikhVWmN4EpKW0iOTt4g-gzGzoHsz","app_key":"OZMV9Hx4pERwu1aLb0BkeQDH","server_url":"https://kycryikh.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>é’±åŠ›æ™–çš„å°ç«™</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>å½’æ¡£</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/message/">
                <i class="iconfont icon-cliplist"></i>
                <span>ç•™è¨€æ¿</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                <span>å‹æƒ…é“¾æ¥</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://s2.loli.net/2023/04/14/PZzfdpVG8gKBeJk.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="ã€ŠCS106Lç¬”è®°ã€‹"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-04-14 00:00" pubdate>
          2023å¹´4æœˆ14æ—¥ å‡Œæ™¨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          20k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          167 åˆ†é’Ÿ
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">ã€ŠCS106Lç¬”è®°ã€‹</h1>
            
            
              <div class="markdown-body">
                
                <div class="note note-success">
            <p>è¯¾ç¨‹æ¥æºï¼šStanford-CS106L(22 fall)</p><p>è¯¾ç¨‹ä»‹ç»ï¼š<a target="_blank" rel="noopener" href="https://github.com/qlhhahaha/HashMap_for_CS106L">HashMap_for_CS106L</a></p>
          </div>



<h1 id="Lecture2ã€Types-and-Structs"><a href="#Lecture2ã€Types-and-Structs" class="headerlink" title="Lecture2ã€Types and Structs"></a>Lecture2ã€Types and Structs</h1><h2 id="ä¸€ã€Types"><a href="#ä¸€ã€Types" class="headerlink" title="ä¸€ã€Types"></a>ä¸€ã€Types</h2><ul>
<li><strong>é™æ€è¯­è¨€ï¼š</strong>æœ‰åå­—çš„ä¸œè¥¿ï¼ˆå˜é‡&#x2F;å‡½æ•°ï¼‰è¦äººä¸ºç»™ç±»å‹</li>
<li><strong>åŠ¨æ€è¯­è¨€ï¼š</strong>è¿è¡Œæ—¶è§£é‡Šå™¨æ ¹æ®current valueè‡ªåŠ¨ç»™ç±»å‹</li>
</ul>
<p><img src="https://s2.loli.net/2023/04/14/YX8tVdgN5bH6hiu.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://s2.loli.net/2023/04/14/kQbXxquftZjcAMz.png" srcset="/img/loading.gif" lazyload></p>
<h1 id="Lecture3ã€Stream"><a href="#Lecture3ã€Stream" class="headerlink" title="Lecture3ã€Stream"></a>Lecture3ã€Stream</h1><h2 id="ä¸€ã€cout"><a href="#ä¸€ã€cout" class="headerlink" title="ä¸€ã€cout"></a>ä¸€ã€cout</h2><p>coutæ˜¯stdå†…åµŒçš„è¾“å‡ºæµï¼Œå®ƒçš„ç±»å‹æ˜¯std::ostreamï¼Œæ‰€ä»¥å…¶å®<strong>ä½ ä¹Ÿå®Œå…¨å¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ªstd::ostreamç±»å‹çš„è¾“å‡ºæµ</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">writeToStream</span><span class="hljs-params">(std::ostream&amp; anyOutputStream, <span class="hljs-type">int</span> favouriteNumber)</span> </span>&#123;<br>    anyOutputStream &lt;&lt; <span class="hljs-string">&quot;Writing to stream: &quot;</span><br>        &lt;&lt; favouriteNumber &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// Write an int to the user&#x27;s console.</span><br>    <span class="hljs-type">int</span> favouriteNumber = <span class="hljs-number">1729</span>;<br><br>    <span class="hljs-comment">// Write method to take any ostream</span><br>    <span class="hljs-function">std::ofstream <span class="hljs-title">fileOut</span><span class="hljs-params">(<span class="hljs-string">&quot;out.txt&quot;</span>)</span></span>;<br><br>    <span class="hljs-built_in">writeToStream</span>(cout, favouriteNumber);<br>    <span class="hljs-built_in">writeToStream</span>(fileOut, favouriteNumber + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç ä¼šåœ¨æ§åˆ¶å°ä¸Šè¾“å‡º1729ï¼Œåœ¨out.txtä¸­å†™å…¥1730</p>
<h2 id="äºŒã€cin"><a href="#äºŒã€cin" class="headerlink" title="äºŒã€cin"></a>äºŒã€cin</h2><p>åŒç†ï¼Œå¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªstd::istreamç±»å‹çš„è¾“å…¥æµ</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//read numbers from a file</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">readNumbers</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// Create our istream and make it open the file</span><br>    <span class="hljs-function">std::istream <span class="hljs-title">input</span><span class="hljs-params">(<span class="hljs-string">&quot;res/numbers.txt&quot;</span>)</span></span>;<br>    <span class="hljs-type">int</span> value;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) &#123;<br>        input &gt;&gt; value;<br>        <span class="hljs-keyword">if</span>(input.<span class="hljs-built_in">fail</span>())<br>            <span class="hljs-keyword">break</span>;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Value read: &quot;</span> &lt;&lt; value &lt;&lt; endl;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<p><img src="https://s2.loli.net/2023/04/14/GxBvd9eRrohVJXI.png" srcset="/img/loading.gif" lazyload></p>
<h1 id="Lecture4ã€Initialization-and-References"><a href="#Lecture4ã€Initialization-and-References" class="headerlink" title="Lecture4ã€Initialization and References"></a>Lecture4ã€Initialization and References</h1><h2 id="ä¸€ã€Initialization"><a href="#ä¸€ã€Initialization" class="headerlink" title="ä¸€ã€Initialization"></a>ä¸€ã€Initialization</h2><ol>
<li>æ³¨æ„vectorä¸¤ç§åˆå§‹åŒ–çš„åŒºåˆ«</li>
</ol>
<p><img src="https://s2.loli.net/2023/04/14/kPzA2belKB5qnNr.png" srcset="/img/loading.gif" lazyload alt="Untitled"></p>
<div class="note note-warning">
            <p>ğŸ’¡ PS. å…¶ä¸­å¤§æ‹¬å·åˆå§‹åŒ–è¢«ç§°ä¸ºâ€œç»Ÿä¸€åˆå§‹åŒ–â€ï¼Œæ˜¯C11å¼•è¿›çš„ï¼Œå¯¹æ‰€æœ‰æ•°æ®ç±»å‹éƒ½é€‚ç”¨ï¼Œå¯ä»¥åœ¨declarationæ—¶ç«‹å³åˆå§‹åŒ–</p>
          </div>

<ol start="2">
<li><strong>ç»“æ„åŒ–ç»‘å®šï¼ˆstructured bindingï¼‰</strong></li>
</ol>
<p>â€‹	ideaï¼šç»å…¸è¯­æ³•ä¸­ï¼Œä¸ºäº†æ¥æ”¶ä¸€ä¸ªstruct\pairï¼Œå¯èƒ½å¾—ç”¨ç‚¹å·å»ä¸€ä¸ªä¸ªè¯»å–ç»“æ„ä½“é‡Œçš„å€¼ï¼Œè¿™å¾ˆéº»çƒ¦ï¼›c17ä¸­å¼•	å…¥ç»“æ„åŒ–ç»‘å®šï¼Œå¯ä»¥ç›´æ¥ç”¨<strong>auto+ä¸­æ‹¬å·</strong>å»æ¥æ”¶ï¼ˆè¯è¯´è¿™ä¸œè¥¿matlabé‡Œä¸æ˜¯æ—©æœ‰äº†å—ã€‚ã€‚ï¼‰</p>
<p><img src="https://s2.loli.net/2023/04/14/suEOq9jPceZ7LD8.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="äºŒã€References"><a href="#äºŒã€References" class="headerlink" title="äºŒã€References"></a>äºŒã€References</h2><p>ä¸€ä¸ªç»å…¸çš„å¼•ç”¨errorï¼šæƒ³ç»™pairä¸­çš„æ¯ä¸ªå€¼åŠ ä¸€</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">shift</span><span class="hljs-params">(vector&lt;std::pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt;&amp; nums)</span> </span><br><span class="hljs-function"></span>&#123;<br>		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> [num1, num2]: nums) <br>		&#123;<span class="hljs-comment">//æ˜¾ç„¶é”™äº†ï¼Œå› ä¸ºnum1ã€2æ˜¯numsçš„å‰¯æœ¬ï¼Œå¼€è¾Ÿäº†æ–°ç©ºé—´</span><br>				num1++;<br>				num2++;<br>		&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>åº”è¯¥ä¿®æ”¹ä¸º for (auto&amp; [num1, num2]: nums)</p>
<h1 id="Lecture5ã€Container"><a href="#Lecture5ã€Container" class="headerlink" title="Lecture5ã€Container"></a>Lecture5ã€Container</h1><ol>
<li>ä¸è¦ææ··vectorçš„_sizeå’Œ_capacityå±æ€§</li>
</ol>
<p><img src="https://s2.loli.net/2023/04/14/Zv2KtfI5RH7MVgW.png" srcset="/img/loading.gif" lazyload></p>
<h1 id="Lecture7ã€Classes"><a href="#Lecture7ã€Classes" class="headerlink" title="Lecture7ã€Classes"></a>Lecture7ã€Classes</h1><ol>
<li>STLä¸­æ‰€æœ‰çš„containeréƒ½æ˜¯class</li>
<li><strong>æ¨¡æ¿ç±»ï¼ˆtemplate classï¼‰</strong></li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//æ¨¡æ¿ç±»è¯­æ³•</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> First, <span class="hljs-keyword">typename</span> Second&gt; <span class="hljs-keyword">class</span> <span class="hljs-title class_">my_pair</span><br>&#123;<br>		<span class="hljs-keyword">public</span>:<br>			<span class="hljs-function">First <span class="hljs-title">get_first</span><span class="hljs-params">()</span></span>;<br>			<span class="hljs-function">Second <span class="hljs-title">get_second</span><span class="hljs-params">()</span></span>;<br>	<br>			<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">set_first</span><span class="hljs-params">(First f)</span></span>;<br>			<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">set_second</span><span class="hljs-params">(Second f)</span></span>;<br>		<br>		<span class="hljs-keyword">private</span>:<br>			First first;<br>			Second second;<br>&#125;;		<br></code></pre></td></tr></table></figure>

<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">/*****************vector.h********************/</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vector.cpp&quot;</span>           <span class="hljs-comment">//ps2</span></span><br><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">vector</span>&lt;T&gt;<br>&#123;<br>	<span class="hljs-function">T <span class="hljs-title">my_at</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span></span>;<br>&#125;<br><br><span class="hljs-comment">/*****************vector.cpp********************/</span><br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;       <span class="hljs-comment">//ps1</span><br><span class="hljs-type">void</span> vector&lt;T&gt;::<span class="hljs-built_in">my_at</span>(<span class="hljs-type">int</span> i)<br>&#123;<br>	<span class="hljs-comment">//oops</span><br>&#125;<br><br><span class="hljs-comment">/*****************main.cpp********************/</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;vector.h&quot;</span></span><br>vector&lt;<span class="hljs-type">int</span>&gt; a;<br>a.<span class="hljs-built_in">my_at</span>(<span class="hljs-number">5</span>);<br></code></pre></td></tr></table></figure>

<div class="note note-warning">
            <aside> ğŸ’¡ PS.<ol><li>é¦–å…ˆï¼Œæ³¨æ„å¿…é¡»åœ¨æ¯ä¸ªæˆå‘˜å‡½æ•°é‚£å„¿å»å£°æ˜ä¸€éå®ƒæ˜¯templateï¼Œä¹Ÿå°±æ˜¯å»æ‰ps1é‚£ä¸€è¡Œä¼šæŠ¥é”™</li><li>ps2é‚£ä¸€è¡Œï¼Œæ³¨æ„ï¼Œvector.hå¤´æ–‡ä»¶é‡Œè¦include â€œvector.cppâ€ï¼Œå¦åˆ™æ‰¾ä¸åˆ°my_at()å‡½æ•°çš„å…·ä½“å®šä¹‰ ï¼ˆæƒ³äº†è€åŠå¤©ä¹Ÿæ²¡æƒ³æ¸…æ¥šä¸ºå•¥ã€‚ã€‚å—¯è®°ç€å§ï¼‰</li><li>ä¸€èˆ¬ä¸åœ¨å¤´æ–‡ä»¶é‡Œincludeæºæ–‡ä»¶ï¼Œå› ä¸ºå¯èƒ½é€ æˆé‡å¤å®šä¹‰ï¼›ä½†ä¹Ÿæœ‰ä¸€äº›åœºæ™¯æˆ–è®¸ä¼šç”¨ï¼Œæ¯”å¦‚vscodeé‡Œæ‡’å¾—å†™cmakeè„šæœ¬ï¼Œå°±å¯ä»¥ç”¨include&lt;.cpp&gt;è¿™ç§trickã€‚ã€‚</li></ol>
          </div>

<p><img src="https://s2.loli.net/2023/04/14/oDHRjb3kGdw2ON8.jpg" srcset="/img/loading.gif" lazyload></p>
<h1 id="Lecture9ã€Template-Functions"><a href="#Lecture9ã€Template-Functions" class="headerlink" title="Lecture9ã€Template Functions"></a>Lecture9ã€Template Functions</h1><ol>
<li><p><strong>motivationï¼š</strong>ä¸€ä¸ªåŠŸèƒ½é€šç”¨æ€§å¾ˆå¼ºçš„å‡½æ•°ï¼Œè¦å› ä¸ºæ¥æ”¶å‚æ•°æ•°æ®ç±»å‹ä¸åŒè€Œå¤åˆ¶ç²˜è´´å¤šä¸ªç‰ˆæœ¬å—ï¼Ÿå½“ç„¶ï¼Œfunction overloadingå¯ä»¥ç®€åŒ–è¿™ä¸ªé—®é¢˜ï¼Œä½†ä»ç„¶å¾—å¤åˆ¶ç²˜è´´ï¼Œèƒ½ä¸èƒ½æŠŠè¿™ä¸ªå‡½æ•°ç»™ä¸€èˆ¬åŒ–ï¼Œä»æ ¹æºä¸Šè§£å†³é—®é¢˜æï¼Ÿ</p>
<p><img src="https://s2.loli.net/2023/04/14/xJfgFth1wOmLb5I.png" srcset="/img/loading.gif" lazyload></p>
</li>
<li><p><strong>æ¨¡æ¿å‡½æ•°ï¼ˆTemplate Functionsï¼‰</strong></p>
<p><img src="https://s2.loli.net/2023/04/14/9zcsDjKper6XuOI.png" srcset="/img/loading.gif" lazyload></p>
<p>å…¶ä¸­typenameå¯ä»¥è®¾å®šé»˜è®¤å‚æ•°ï¼Œå³å†™æˆtemplate<typename Type=int></p>
<p>åœ¨å®ä¾‹åŒ–ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥æ˜¾å¼å®šä¹‰Type</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">cout &lt;&lt; <span class="hljs-built_in">myMin</span>&lt;<span class="hljs-type">int</span>&gt;(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>) &lt;&lt; endl;<br></code></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼Œå®ƒè¿˜å¯ä»¥æ›´èªæ˜â€”â€”æˆ‘ä»¬éšå¼å£°æ˜å˜é‡ï¼Œè®©ç¼–è¯‘å™¨è‡ªå·±æ¨æ–­</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span> U&gt;<br><span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">smarterMyMin</span><span class="hljs-params">(T a, U b)</span></span><br><span class="hljs-function"></span>&#123;<br>	<span class="hljs-keyword">return</span> a &lt; b ? a : b;<br>&#125;<br><br>cout &lt;&lt; <span class="hljs-built_in">smarterMyMin</span>(<span class="hljs-number">3.2</span>, <span class="hljs-number">4</span>) &lt;&lt; endl;<br></code></pre></td></tr></table></figure>

<div class="note note-warning">
            <p>ğŸ’¡ PS. æ³¨æ„ï¼šæ¨¡æ¿ç±»å’Œæ¨¡æ¿å‡½æ•°éƒ½æ˜¯åœ¨ä½¿ç”¨ï¼ˆå³å®ä¾‹åŒ–ï¼‰ä¹‹åæ‰ä¼šç¼–è¯‘ï¼ä¸ç”¨å°±ä¸ç¼–è¯‘ã€‚ è€Œä¸åŒçš„å®ä¾‹åŒ–ç¼–è¯‘å‡ºçš„ç»“æœä¹Ÿä¸ä¸€æ ·ï¼Œæ‰€ä»¥å…¶å®æ˜¯ç¼–è¯‘å™¨å¸®ä½ å®Œæˆäº†â€œå¤åˆ¶ç²˜è´´å¤šä¸ªç‰ˆæœ¬â€è¿™ä¸€æ­¥ã€‚</p>
          </div></li>
</ol>
<h1 id="Lecture10ã€Lambda-Functions"><a href="#Lecture10ã€Lambda-Functions" class="headerlink" title="Lecture10ã€Lambda Functions"></a>Lecture10ã€Lambda Functions</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">abssort</span><span class="hljs-params">(<span class="hljs-type">float</span>* x, <span class="hljs-type">unsigned</span> n)</span> </span>&#123;<br>    std::<span class="hljs-built_in">sort</span>(x, x + n,<br>        <span class="hljs-comment">// Lambda expression begins</span><br>        [](<span class="hljs-type">float</span> a, <span class="hljs-type">float</span> b) &#123;<br>            <span class="hljs-built_in">return</span> (std::<span class="hljs-built_in">abs</span>(a) &lt; std::<span class="hljs-built_in">abs</span>(b));<br>        &#125; <span class="hljs-comment">// end of lambda expression</span><br>    );<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/04/14/N5Y3hbXFqJDOmaU.png" srcset="/img/loading.gif" lazyload></p>
<p><strong>æ•è·åˆ—è¡¨çš„ä½œç”¨ï¼š</strong></p>
<ol>
<li>[ ]æ˜¯lambdaå¼•å‡ºç¬¦ï¼Œç¼–è¯‘å™¨æ ¹æ®è¯¥å¼•å‡ºç¬¦åˆ¤æ–­æ¥ä¸‹æ¥çš„ä»£ç æ˜¯å¦æ˜¯lambdaå‡½æ•°</li>
<li>æ•æ‰ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡ä¾›lambdaä½¿ç”¨</li>
</ol>
<p><strong>æ•è·åˆ—è¡¨ä½¿ç”¨ï¼š</strong></p>
<ul>
<li>[ ]è¡¨ç¤ºä¸æ•è·ä»»ä½•å˜é‡</li>
<li>[var]ã€[&amp;var]åˆ†åˆ«è¡¨ç¤ºä»¥å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’çš„æ–¹å¼æ•æ‰å˜é‡var</li>
<li>[&#x3D;]ã€[&amp;]åˆ†åˆ«è¡¨ç¤ºä»¥å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’æ–¹å¼æ•è·æ‰€æœ‰<strong>çˆ¶ä½œç”¨åŸŸ</strong>çš„å˜é‡</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> index = <span class="hljs-number">1</span>;<br><span class="hljs-type">int</span> num = <span class="hljs-number">100</span>;<br><span class="hljs-keyword">auto</span> function = ([]()<br>		&#123;num = <span class="hljs-number">1000</span>;<br>		index = <span class="hljs-number">2</span>;<br>		std::cout &lt;&lt; <span class="hljs-string">&quot;index: &quot;</span>&lt;&lt; index &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> <br>            &lt;&lt; <span class="hljs-string">&quot;num: &quot;</span>&lt;&lt; num &lt;&lt; std::endl; &#125;);<br><br>	<span class="hljs-built_in">function</span>();<br><span class="hljs-comment">//æŠ¥é”™ï¼Œå› ä¸ºæ²¡å»æ•è·numå’Œindexå°±åœ¨ä½¿ç”¨å®ƒä»¬</span><br><br><span class="hljs-type">int</span> index = <span class="hljs-number">1</span>;<br><span class="hljs-type">int</span> num = <span class="hljs-number">100</span>;<br><span class="hljs-keyword">auto</span> function = ([=]()<br>		&#123;num = <span class="hljs-number">1000</span>;<br>		index = <span class="hljs-number">2</span>;<br>		std::cout &lt;&lt; <span class="hljs-string">&quot;index: &quot;</span>&lt;&lt; index &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> <br>            &lt;&lt; <span class="hljs-string">&quot;num: &quot;</span>&lt;&lt; num &lt;&lt; std::endl; &#125;);<br><br>	<span class="hljs-built_in">function</span>();<br><span class="hljs-comment">//æŠ¥é”™ï¼Œå› ä¸ºlambdaçš„å€¼å¼•ç”¨é»˜è®¤ä¸èƒ½ä¿®æ”¹ï¼Œè¦ä¿®æ”¹çš„è¯å¾—åŠ mutableå…³é”®å­—</span><br><br><span class="hljs-type">int</span> index = <span class="hljs-number">1</span>;<br><span class="hljs-type">int</span> num = <span class="hljs-number">100</span>;<br><span class="hljs-keyword">auto</span> function = ([=]()<span class="hljs-keyword">mutable</span><br>		&#123;num = <span class="hljs-number">1000</span>;<br>		index = <span class="hljs-number">2</span>;<br>		std::cout &lt;&lt; <span class="hljs-string">&quot;index: &quot;</span>&lt;&lt; index &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> <br>            &lt;&lt; <span class="hljs-string">&quot;num: &quot;</span>&lt;&lt; num &lt;&lt; std::endl; &#125;);<br><br>	<span class="hljs-built_in">function</span>();<br><span class="hljs-comment">//æ­£ç¡®ï¼Œå› ä¸ºåŠ äº†mutableå…³é”®å­—ï¼Œå€¼ä¼ é€’å˜é‡å¯ä¿®æ”¹ï¼ˆä½†æ”¹çš„ä¹Ÿæ˜¯å‰¯æœ¬ï¼Œä¸å½±å“åŸå€¼ï¼‰</span><br><br><span class="hljs-type">int</span> index = <span class="hljs-number">1</span>;<br><span class="hljs-type">int</span> num = <span class="hljs-number">100</span>;<br><span class="hljs-keyword">auto</span> function = ([&amp;]()<br>		&#123;num = <span class="hljs-number">1000</span>;<br>		index = <span class="hljs-number">2</span>;<br>		std::cout &lt;&lt; <span class="hljs-string">&quot;index: &quot;</span>&lt;&lt; index &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> <br>            &lt;&lt; <span class="hljs-string">&quot;num: &quot;</span>&lt;&lt; num &lt;&lt; std::endl; &#125;);<br><br>	<span class="hljs-built_in">function</span>();<br><span class="hljs-comment">//æ­£ç¡®ï¼Œå¼•ç”¨ä¼ é€’çš„å€¼å¯ä»¥ä¿®æ”¹</span><br></code></pre></td></tr></table></figure>

<p>ä»¥ä¸Šè¿°ä»£ç ä¸ºä¾‹ï¼Œæ€è€ƒLambdaçš„æ„ä¹‰ï¼ˆå’Œæ™®é€šå‡½æ•°ç›¸æ¯”ï¼‰ï¼š</p>
<ol>
<li><p>çœå»å®šä¹‰ä¸€ä¸ªå®Œæ•´å‡½æ•°ã€ç»™å‡½æ•°å‘½åçš„è¿‡ç¨‹ï¼Œå¯¹äºè¿™ç§<strong>ä¸éœ€è¦å¤ç”¨</strong>ï¼Œä¸”<strong>çŸ­å°</strong>çš„å‡½æ•°ï¼Œç›´æ¥ä¼ é€’å‡½æ•°ä½“å¯ä»¥å¢åŠ ä»£ç çš„å¯è¯»æ€§ã€‚æ‰€ä»¥lambdaå‡½æ•°åˆå«â€œåŒ¿åå‡½æ•°â€ã€‚</p>
<div class="note note-warning">
            <p>ğŸ’¡ PS. ä¸è¦å°çœ‹â€œçœç•¥å‘½åâ€è¿™ä»¶äº‹ï¼Œè¡¨é¢ä¸Šçœ‹å®ƒåªæ˜¯å°‘äº†ä¸ªåå­—ï¼Œä½†å®è´¨æ˜¯æŠŠå®ƒçœ‹ä½œä¸€ä¸ªæ™®é€šçš„â€œæ“ä½œè¿‡ç¨‹â€è€Œéâ€œå¯¹è±¡â€ã€‚å°±åƒä½ ä¼šç»™ä¸€ä¸ªå˜é‡ã€ç±»ã€å‡½æ•°å‘½åï¼Œä½†ä¸ä¼šå•ç‹¬ç»™â€œæŠŠaä¹˜ä¸Šcçš„3æ¬¡æ–¹å†åŠ 123å†é™¤321â€è¿™ç§çº¯è¿‡ç¨‹å»å‘½ä¸ªåï¼ˆé™¤éè¿™ä¸ªæ“ä½œå¤ç”¨ç‡è¶³å¤Ÿé«˜ï¼‰ï¼Œå› ä¸ºå®ƒæŠ½è±¡ç¨‹åº¦å¤ªä½ï¼Œå³ç”¨å³æ‰”ã€‚ <strong>è€Œæ‰€æœ‰å€¼å¾—å»å‘½åçš„ä¸œè¥¿ï¼Œéƒ½åº”è¯¥æ˜¯ä¼šå¤ç”¨ä¸”æŠ½è±¡ç¨‹åº¦è¶³å¤Ÿçš„ã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯ç¼–ç¨‹ä¸­çš„ä¸€ç§å“²å­¦æ€æƒ³ã€‚</strong> å¦‚ï¼šä¸€ä¸ªæ™®é€šæ“ä½œå¤ç”¨ç¨‹åº¦è¶³å¤Ÿé«˜æ—¶ï¼ˆæ¯”è¾ƒint aã€int bå¤§å°ï¼‰ï¼Œå°±æŠŠå®ƒæŠ½è±¡ä¸ºä¸€ä¸ªå‡½æ•°ï¼ˆmaxå‡½æ•°ï¼‰ï¼›è€Œè¿™ä¸ªå‡½æ•°å¤ç”¨ç‡å¤Ÿé«˜æ—¶ï¼Œå°±è¿›ä¸€æ­¥æŠ½è±¡ä¸ºtemplate function</p>
          </div>


</li>
<li><p>å…è®¸å‡½æ•°ä½œä¸ºä¸€ä¸ªå¯¹è±¡è¿›è¡Œ<strong>ä¼ é€’</strong>ï¼šlambdaä¹Ÿå¯ä»¥å‘½åï¼Œç„¶åå°†å…¶è¿›è¡Œä¼ é€’ã€‚è¿™ç§æ–¹å¼å’Œä¼ ç»Ÿçš„å‡½æ•°æŒ‡é’ˆæ¯”èµ·æ¥æ›´åŠ ç®€æ˜ã€‚</p>
</li>
<li><p>å¼•å…¥<strong>é—­åŒ…</strong>ï¼šé—­åŒ…æ˜¯æŒ‡å°†å½“å‰ä½œç”¨åŸŸä¸­çš„å˜é‡é€šè¿‡å€¼æˆ–è€…å¼•ç”¨çš„æ–¹å¼å°è£…åˆ°lambdaè¡¨è¾¾å¼å½“ä¸­ï¼Œæˆä¸ºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä½¿ä½ çš„lambdaè¡¨è¾¾å¼ä»ä¸€ä¸ªæ™®é€šçš„å‡½æ•°å˜æˆäº†ä¸€ä¸ªå¸¦éšè—å‚æ•°çš„å‡½æ•°ã€‚</p>
</li>
</ol>
<p>å¸¸è§åº”ç”¨åœºæ™¯ï¼š</p>
<ol>
<li><p><strong>ç”¨äºstlç®—æ³•åº“</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// for_eachåº”ç”¨å®ä¾‹</span><br><span class="hljs-type">int</span> a[<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">11</span>, <span class="hljs-number">2</span>, <span class="hljs-number">33</span>, <span class="hljs-number">4</span>&#125;;<br><span class="hljs-built_in">sort</span>(a, a+<span class="hljs-number">4</span>, [=](<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y) -&gt; <span class="hljs-type">bool</span> &#123; <span class="hljs-keyword">return</span> x%<span class="hljs-number">10</span> &lt; y%<span class="hljs-number">10</span>; &#125; );<br>for_each(a, a+<span class="hljs-number">4</span>, [=](<span class="hljs-type">int</span> x) &#123; cout &lt;&lt; x &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;&#125; );<br></code></pre></td></tr></table></figure>



<div class="note note-warning">
            <p>ğŸ’¡ PS. foreach()è¿™ä¸ªä¸œè¥¿åœ¨#include<algorithm>é‡Œï¼Œæ˜¯ä¸ªtemplate functionï¼Œå…¶å‰ä¸¤ä¸ªå‚æ•°æ˜¯beginå’ŒendæŒ‡é’ˆ</p>
          </div>


</li>
<li><p><em><strong>*ç”¨äºå¤šçº¿ç¨‹åœºæ™¯*</strong></em></p>
</li>
<li><p><strong>ä½œä¸ºå‡½æ•°çš„å…¥å‚</strong></p>
</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">using</span> FuncCallback = std::function&lt;<span class="hljs-built_in">void</span>(<span class="hljs-type">void</span>)&gt;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DataCallback</span><span class="hljs-params">(FuncCallback callback)</span></span><br><span class="hljs-function"></span>&#123;<br>	std::cout &lt;&lt; <span class="hljs-string">&quot;Start FuncCallback!&quot;</span> &lt;&lt; std::endl;<br>	<span class="hljs-built_in">callback</span>();<br>	std::cout &lt;&lt; <span class="hljs-string">&quot;End FuncCallback!&quot;</span> &lt;&lt; std::endl;<br>&#125;<br><br><span class="hljs-keyword">auto</span> callback_handler = [&amp;]()&#123;<br>	std::cout &lt;&lt; <span class="hljs-string">&quot;This is callback_handler&quot;</span>;<br>&#125;;<br><br><span class="hljs-built_in">DataCallback</span>(callback_handler);<br></code></pre></td></tr></table></figure>



<h1 id="Lecture12ã€Specical-Member-Functions-6ä¸ª"><a href="#Lecture12ã€Specical-Member-Functions-6ä¸ª" class="headerlink" title="Lecture12ã€Specical Member Functions(6ä¸ª)"></a>Lecture12ã€Specical Member Functions(6ä¸ª)</h1><ol>
<li><p><strong>ä»‹ç»ï¼š</strong></p>
<p>C++ä¸­ç±»çš„ç‰¹æ®Šæˆå‘˜å‡½æ•°æœ‰6ä¸ªï¼Œå¯¹äºä¸€ä¸ªç±»</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span><br>&#123;<br>	<span class="hljs-keyword">public</span>:<br>	    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setData</span><span class="hljs-params">(<span class="hljs-type">int</span> data)</span> </span>&#123; m_data = data; &#125;<br>	    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getData</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> </span>&#123; <span class="hljs-keyword">return</span> m_data; &#125;<br>	<br>	<span class="hljs-keyword">private</span>:<br>	    <span class="hljs-type">int</span> m_data;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç”Ÿæˆè¿™äº›ç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼Œæ‰€ä»¥ç±»Açš„å®šä¹‰ç­‰ä»·äºå¦‚ä¸‹ï¼Œ</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span><br>&#123;<br>	<span class="hljs-keyword">public</span>:<br>	    <span class="hljs-built_in">A</span>() &#123;&#125;; <span class="hljs-comment">// é»˜è®¤æ„é€ å‡½æ•°</span><br>	    <span class="hljs-built_in">A</span>(<span class="hljs-type">const</span> A&amp; other) &#123; m_data = other.m_data; &#125; <span class="hljs-comment">// æ‹·è´æ„é€ å‡½æ•°</span><br>	    A&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> A&amp; other) &#123; m_data = other.m_data; <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>; &#125; <span class="hljs-comment">// æ‹·è´èµ‹å€¼æ„é€ å‡½æ•°</span><br>	    ~<span class="hljs-built_in">A</span>() &#123;&#125; <span class="hljs-comment">// ææ„å‡½æ•°</span><br>	    <span class="hljs-built_in">A</span>(A&amp;&amp; other) &#123; m_data = other.m_data; &#125; <span class="hljs-comment">// ç§»åŠ¨æ„é€ å‡½æ•°</span><br>	    A&amp; <span class="hljs-keyword">operator</span>=(A&amp;&amp; other) &#123; m_data = other.m_data; <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>; &#125; <span class="hljs-comment">// ç§»åŠ¨èµ‹å€¼æ„é€ å‡½æ•°</span><br>	<br>	<br>	    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setData</span><span class="hljs-params">(<span class="hljs-type">int</span> data)</span> </span>&#123; m_data = data; &#125;<br>	    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getData</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> </span>&#123; <span class="hljs-keyword">return</span> m_data; &#125;<br>	<br>	<span class="hljs-keyword">private</span>:<br>	    <span class="hljs-type">int</span> m_data;<br>&#125;;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>æ‹·è´æ„é€ å‡½æ•°ï¼ˆcopy constructorï¼‰</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream &gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Complex</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">double</span> real, imag;<br>    <span class="hljs-built_in">Complex</span>(<span class="hljs-type">double</span> r, <span class="hljs-type">double</span> i) &#123;<br>        real= r; imag = i;<br>    &#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-function">Complex <span class="hljs-title">cl</span><span class="hljs-params">(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)</span></span>;<br>    <span class="hljs-function">Complex <span class="hljs-title">c2</span> <span class="hljs-params">(cl)</span></span>;  <span class="hljs-comment">//ç”¨æ‹·è´æ„é€ å‡½æ•°åˆå§‹åŒ–c2</span><br>    cout&lt;&lt;c2.real&lt;&lt;<span class="hljs-string">&quot;,&quot;</span>&lt;&lt;c2.imag;  <span class="hljs-comment">//è¾“å‡º 1,2</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å¦‚æœç”¨æˆ·è‡ªå·±ç¼–å†™äº†å¤åˆ¶æ„é€ å‡½æ•°ï¼Œåˆ™é»˜è®¤å¤åˆ¶æ„é€ å‡½æ•°å°±ä¸å­˜åœ¨äº†</p>
</li>
<li><p><strong>æ‹·è´èµ‹å€¼æ„é€ å‡½æ•°ï¼ˆcopy assignment constructorï¼‰</strong></p>
<p>å¯¹â€œï¼â€è¿›è¡Œé‡è½½ï¼Œä½œç”¨æ˜¯è®©ä¸¤ä¸ªå·²ç»åˆå§‹åŒ–å®Œæ¯•çš„ç±»è¿›è¡Œæ‹·è´</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs CPP">myclass A,Bï¼›<br>A = Bï¼›<br></code></pre></td></tr></table></figure></li>
</ol>
<div class="note note-warning">
            <p>â€‹	ğŸ’¡ PS. ä¸Šè¿°ä¸¤ä¸ªæ„é€ å‡½æ•°çš„åº”ç”¨å…¶å®éƒ½éå¸¸éå¸¸å¹¿æ³› â€”â€” åˆ«å¿˜äº†ï¼Œstlçš„å®¹å™¨å…¨éƒ½æ˜¯ç±»ï¼ vector<int>nums1 &#x3D; nums2ä¹Ÿç”¨äº†æ‹·è´èµ‹å€¼æ„é€ å‡½æ•°ï¼</p>
          </div>

<ol start="4">
<li><strong>æ·±æ‹·è´ä¸æµ…æ‹·è´</strong></li>
</ol>
<ul>
<li><p>å¤§éƒ¨åˆ†æ­£å¸¸æƒ…å†µä¸‹åªéœ€è¦æµ…æ‹·è´ï¼ˆå¦‚åŸºæœ¬æ•°æ®ç±»å‹ã€ç®€å•çš„ç±»ï¼‰ï¼Œint A &#x3D; Bï¼Œå°±æ˜¯Bæ‰€åœ¨å†…å­˜ä¸­çš„æ•°æ®æŒ‰äºŒè¿›åˆ¶ä½ï¼ˆbitï¼‰å¤åˆ¶åˆ°Aæ‰€åœ¨çš„å†…å­˜</p>
</li>
<li><p>æ·±æ‹·è´ç”¨äºä»€ä¹ˆæƒ…å†µæï¼Ÿå‡è®¾æœ‰æŸä¸ªç±»æœ‰ä¸¤ä¸ªå®ä¾‹Aã€Bï¼Œç±»æŒæœ‰<strong>åŠ¨æ€åˆ†é…çš„å†…å­˜&#x2F;æŒ‡å‘å…¶ä»–æ•°æ®çš„æŒ‡é’ˆï¼Œ</strong>é‚£æ­¤æ—¶å°±ä¸èƒ½ç®€å•åœ°A &#x3D; Bï¼Œå¦åˆ™Aä¸­çš„æŒ‡é’ˆä¹Ÿä¼šæŒ‡å‘Bä¸­æŒ‡é’ˆå¯¹åº”çš„å†…å­˜ï¼Œè¿™æ ·ä¸€æ¥ï¼Œä¸€ä¿®æ”¹Aï¼ŒBä¹Ÿä¼šéšä¹‹è¢«ä¿®æ”¹ï¼Œæ²¡è¾¾åˆ°æ‹·è´çš„æ•ˆæœã€‚</p>
<p>æ­£ç¡®åšæ³•æ˜¯ï¼Œå»æ˜¾å¼åœ°å®šä¹‰ä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°ï¼Œå®ƒé™¤äº†ä¼šå°†åŸæœ‰å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜å˜é‡æ‹·è´ç»™æ–°å¯¹è±¡ï¼Œè¿˜ä¼šä¸ºæ–°å¯¹è±¡å†åˆ†é…ä¸€å—å†…å­˜ï¼Œå¹¶å°†åŸæœ‰å¯¹è±¡æ‰€æŒæœ‰çš„å†…å­˜ä¹Ÿæ‹·è´è¿‡æ¥ã€‚è¿™æ ·åšçš„ç»“æœæ˜¯ï¼Œ<strong>åŸæœ‰å¯¹è±¡å’Œæ–°å¯¹è±¡æ‰€æŒæœ‰çš„åŠ¨æ€å†…å­˜æ˜¯ç›¸äº’ç‹¬ç«‹çš„</strong>ï¼Œæ›´æ”¹ä¸€ä¸ªå¯¹è±¡çš„æ•°æ®ä¸ä¼šå½±å“å¦å¤–ä¸€ä¸ªå¯¹è±¡ã€‚</p>
</li>
</ul>
<div class="note note-warning">
            <p>â€‹	ğŸ’¡ PS. å¦‚æœä¸€ä¸ªç±»æ‹¥æœ‰æŒ‡é’ˆç±»å‹çš„æˆå‘˜å˜é‡ï¼Œé‚£ä¹ˆç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹å°±éœ€è¦æ·±æ‹·è´ï¼Œå› ä¸ºåªæœ‰è¿™æ ·ï¼Œæ‰èƒ½	å°†æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹å†å¤åˆ¶å‡ºä¸€ä»½æ¥ï¼Œè®©åŸæœ‰å¯¹è±¡å’Œæ–°ç”Ÿå¯¹è±¡ç›¸äº’ç‹¬ç«‹ï¼Œå½¼æ­¤ä¹‹é—´ä¸å—å½±å“ã€‚å¦‚æœç±»çš„æˆ	å‘˜å˜é‡æ²¡æœ‰æŒ‡é’ˆï¼Œä¸€èˆ¬æµ…æ‹·è´è¶³çŸ£ã€‚</p>
          </div>

<ul>
<li><strong>æ·±æ‹·è´çš„å¼€é”€å¾€å¾€æ¯”æµ…æ‹·è´å¤§</strong>ï¼ˆé™¤éæ²¡æœ‰æŒ‡å‘åŠ¨æ€åˆ†é…å†…å­˜çš„å±æ€§ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å€¾å‘äºå°½å¯èƒ½ä½¿ç”¨æµ…æ‹·è´</li>
</ul>
<ol start="5">
<li><p><strong>å·¦å€¼ã€å³å€¼</strong></p>
<ul>
<li><p>å·¦å€¼ï¼ˆlvalueï¼‰ï¼šè¡¨è¾¾å¼ç»“æŸåä¾ç„¶å­˜åœ¨çš„æŒä¹…å¯¹è±¡</p>
</li>
<li><p>å³å€¼ï¼ˆrvalueï¼‰ï¼šè¡¨è¾¾å¼ç»“æŸåå°±ä¸å†å­˜åœ¨çš„ä¸´æ—¶å¯¹è±¡ã€‚å­—é¢é‡ï¼ˆå­—ç¬¦å­—é¢é‡é™¤å¤–ï¼‰ã€ä¸´æ—¶çš„è¡¨è¾¾å¼å€¼ã€ä¸´æ—¶çš„å‡½æ•°è¿”è¿˜å€¼è¿™äº›çŸ­æš‚å­˜åœ¨çš„å€¼éƒ½æ˜¯å³å€¼ã€‚</p>
</li>
</ul>
<p>æ›´ç›´è§‚çš„ç†è§£æ˜¯ï¼šæœ‰å˜é‡åçš„å¯¹è±¡éƒ½æ˜¯å·¦å€¼ï¼Œæ²¡æœ‰å˜é‡åçš„éƒ½æ˜¯å³å€¼ã€‚ï¼ˆå› ä¸ºæœ‰æ— å˜é‡åæ„å‘³ç€è¿™ä¸ªå¯¹è±¡æ˜¯å¦åœ¨ä¸‹ä¸€è¡Œä»£ç æ—¶ä¾ç„¶å­˜åœ¨ï¼‰</p>
</li>
</ol>
<p>â€‹	<div class="note note-warning">
            <p>â€‹	ğŸ’¡ PS. å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå­—ç¬¦å­—é¢é‡æ˜¯å”¯ä¸€ä¸å¯ç®—å…¥å³å€¼çš„å­—é¢é‡ï¼Œå› ä¸ºå®ƒå®é™…å­˜å‚¨åœ¨é™æ€å†…å­˜åŒºï¼Œæ˜¯æŒä¹…å­˜åœ¨çš„</p><p>â€‹	</p>
          </div></p>
<ol start="6">
<li><p><strong>å³å€¼å¼•ç”¨</strong></p>
<p>å³å€¼å¼•ç”¨ç±»å‹ &amp;&amp;ç”¨äºåŒ¹é…å³å€¼ï¼Œå·¦å€¼å¼•ç”¨&amp;ç”¨äºåŒ¹é…å·¦å€¼</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//å·¦å€¼å¼•ç”¨å½¢å‚=&gt;åŒ¹é…å·¦å€¼</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Vector::Copy</span><span class="hljs-params">(Vector&amp; v)</span></span>&#123;<br>    <span class="hljs-keyword">this</span>-&gt;num = v.num;<br>    <span class="hljs-keyword">this</span>-&gt;a = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[num];<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;num;++i)&#123;a[i]=v.a[i]&#125;<br>&#125;<br><br><span class="hljs-comment">//å³å€¼å¼•ç”¨å½¢å‚=&gt;åŒ¹é…å³å€¼</span><br><span class="hljs-type">void</span> Vector::<span class="hljs-built_in">Copy</span>(Vector&amp;&amp; temp)&#123;<br>    <span class="hljs-keyword">this</span>-&gt;num = temp.num;<br>    <span class="hljs-keyword">this</span>-&gt;a = temp.a;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä¸€ä¸ªå¯¹åº”å…³ç³»ï¼š</p>
<p>å·¦å€¼ â€”â€” å·¦å€¼å¼•ç”¨ â€”â€” æ·±æ‹·è´</p>
<p>å³å€¼ â€”â€” å³å€¼å¼•ç”¨ â€”â€” æµ…æ‹·è´</p>
<p>è¿™å’Œæ·±æµ…æ‹·è´çš„å®šä¹‰æ˜¯ç›¸ç¬¦çš„ï¼Œå› ä¸ºå³å€¼ä¸´æ—¶å­˜åœ¨ï¼Œç”¨å®Œå°±ä¸¢ï¼Œæ‰€ä»¥å°±ä¸å­˜åœ¨æ‹·è´ä¹‹ååŠ¨æ€åˆ†é…å†…å­˜å†²çªçš„é—®é¢˜ï¼Œé‚£å°±åªéœ€è¦æµ…æ‹·è´ï¼›å·¦å€¼åä¹‹</p>
</li>
<li><p><strong>å¼ºè½¬å³å€¼std::move()</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>    Vector result;<br>    <span class="hljs-comment">//...DoSomething with result</span><br><br>    <span class="hljs-keyword">if</span>(xxx)&#123;ans = result;&#125;  <br>		<span class="hljs-comment">//ç°åœ¨æˆ‘å¸Œæœ›æŠŠç»“æœæå–åˆ°å¤–éƒ¨çš„å˜é‡ansä¸Š</span><br>		<br>		<span class="hljs-comment">//...Do other things without result</span><br>    <span class="hljs-keyword">return</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>resultèµ‹å€¼ç»™ansåå°±ä¸å†è¢«ä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬æœŸæœ›å®ƒè°ƒç”¨çš„æ˜¯<strong>ç§»åŠ¨èµ‹å€¼æ„é€ å‡½æ•°</strong>ã€‚ ä½†æ˜¯resultæ˜¯ä¸€ä¸ªæœ‰å˜é‡åçš„å·¦å€¼ç±»å‹ï¼Œå› æ­¤ans &#x3D; result è°ƒç”¨çš„æ˜¯æ‹·è´èµ‹å€¼æ„é€ å‡½æ•°è€Œéç§»åŠ¨èµ‹å€¼æ„é€ å‡½æ•°</p>
<p>è§£å†³åŠæ³•ï¼šç”¨c++11æä¾›çš„moveå¼ºè½¬å³å€¼</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>    Vector result;<br>    <span class="hljs-comment">//...DoSomething with result</span><br>	   <br>		<span class="hljs-keyword">if</span>(xxx)&#123;ans = std::<span class="hljs-built_in">move</span>(result);&#125;   <br>		<span class="hljs-comment">//è°ƒç”¨çš„æ˜¯ç§»åŠ¨èµ‹å€¼æ„é€ å‡½æ•°</span><br>		<br>		<span class="hljs-comment">//...Do other things without result</span><br>    <span class="hljs-keyword">return</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>å³å€¼å¼•ç”¨ç±»å‹å’Œå³å€¼çš„å…³ç³»</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; o)</span> </span>&#123;std::cout &lt;&lt; <span class="hljs-string">&quot;ä¸ºå·¦å€¼ã€‚&quot;</span> &lt;&lt; std::endl;&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp;&amp; temp)</span> </span>&#123;std::cout &lt;&lt; <span class="hljs-string">&quot;ä¸ºå³å€¼ã€‚&quot;</span> &lt;&lt; std::endl;&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>  <span class="hljs-type">int</span> a;<br>	<span class="hljs-type">int</span>&amp;&amp; b = <span class="hljs-number">10</span>;<br>  <span class="hljs-comment">//è¯·åˆ†åˆ«å›ç­”ï¼šaã€std::move(a)ã€b åˆ†åˆ«æ˜¯å·¦å€¼è¿˜æ˜¯å³å€¼ï¼Ÿ</span><br>	<span class="hljs-built_in">test</span>(a);<br>	<span class="hljs-built_in">test</span>(std::<span class="hljs-built_in">move</span>(a));<br>	<span class="hljs-built_in">test</span>(b);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç­”ï¼šaæ˜¯å·¦å€¼ï¼Œstd::move(a)æ˜¯å³å€¼ï¼Œä½†bå´æ˜¯å·¦å€¼ã€‚</p>
<p>åœ¨è¿™é‡Œbè™½ç„¶æ˜¯ int&amp;&amp; ç±»å‹ï¼Œä½†å´å› ä¸ºæœ‰å˜é‡åï¼ˆå³å¯æŒä¹…å­˜åœ¨ï¼‰ï¼Œè¢«ç¼–è¯‘å™¨è®¤ä¸ºæ˜¯å·¦å€¼ã€‚</p>
<p><strong>ç»“è®ºï¼šå³å€¼å¼•ç”¨ç±»å‹åªæ˜¯ç”¨äºåŒ¹é…å³å€¼ï¼Œè€Œå¹¶éè¡¨ç¤ºä¸€ä¸ªå³å€¼ã€‚å› æ­¤ï¼Œå°½é‡ä¸è¦å£°æ˜å³å€¼å¼•ç”¨ç±»å‹çš„å˜é‡ï¼Œè€Œåªåœ¨å‡½æ•°å½¢å‚ä½¿ç”¨å®ƒä»¥åŒ¹é…å³å€¼ã€‚</strong></p>
</li>
<li><p><strong>è¡¥å……ï¼šæ„é€ å‡½æ•°ä¹‹åçš„å†’å·</strong></p>
<p>c++çš„è¯­æ³•ç‰¹æ€§ï¼Œå†’å·åé¢è·Ÿçš„æ˜¯èµ‹å€¼</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-built_in">A</span>(<span class="hljs-type">int</span> aa, <span class="hljs-type">int</span> bb):<span class="hljs-built_in">a</span>(aa), <span class="hljs-built_in">b</span>(bb) &#123;&#125;<br><br><span class="hljs-comment">//ç›¸å½“äº</span><br><span class="hljs-built_in">A</span>(<span class="hljs-type">int</span> aa, <span class="hljs-type">int</span> bb)<br>&#123;<br>	a=aa;<br>	b=bb;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<h1 id="Lecture13ã€RAII-and-Smartpointer"><a href="#Lecture13ã€RAII-and-Smartpointer" class="headerlink" title="Lecture13ã€RAII and Smartpointer"></a>Lecture13ã€RAII and Smartpointer</h1><ol>
<li><p><strong>motivation</strong></p>
<p>æ‰‹åŠ¨ç”³è¯·åŠ¨æ€å†…å­˜+æ‰‹åŠ¨é‡Šæ”¾ä¼šæœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp">Person* p = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Person</span>(id_number);<br><br><span class="hljs-comment">//do something</span><br><br><span class="hljs-keyword">delete</span> p;<br></code></pre></td></tr></table></figure>

<p>è‹¥åœ¨ç”³è¯·å®Œå†…å­˜ä¹‹åï¼Œdo somethingçš„è¿‡ç¨‹ä¸­ç”¨æŠ›å‡ºäº†å¼‚å¸¸ï¼ˆthrow an exceptionï¼‰ï¼Œé‚£å°±æ— æ³•æ‰§è¡Œdelete pï¼Œä»è€Œé€ æˆå†…å­˜æ³„æ¼ï¼ˆleak memoryï¼‰ã€‚ æ­¤é—®é¢˜è¿˜ä¸æ­¢æ˜¯æŒ‡é’ˆï¼Œæ–‡ä»¶çš„openå’Œcloseã€çº¿ç¨‹çš„try_lockå’Œunlockã€å¥—æ¥å­—çš„socketå’Œcloseï¼Œéƒ½æ˜¯è¿™æ ·çš„â€œé…å¥—æ“ä½œâ€ï¼Œ</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨RAIIï¼ˆResource Acquisition is Initalizationï¼‰åŸåˆ™ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p>
<ul>
<li><strong>All resources used by a class should be acquired in the constructor</strong></li>
<li><strong>All resources used by a class should be released in the destructor</strong></li>
</ul>
<p>å³key ideaæ˜¯åˆ©ç”¨<strong>â€œå¯¹è±¡çš„ææ„æ˜¯è‡ªåŠ¨å®Œæˆçš„â€</strong> â€”â€” ç”±äºå¯¹è±¡åœ¨go out of its own scopeåï¼Œææ„å‡½æ•°æ€»æ˜¯ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œé‚£ä¹ˆåªè¦éµå¾ªä¸Šé¢ä¸¤ç‚¹åŸåˆ™ï¼Œå°±å¯ä»¥é¿å…å†…å­˜æ³„æ¼äº†</p>
</li>
<li><p><strong>å®ä¾‹</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span><br> <br> <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10000000</span>; i++)<br>	&#123;<br>		<span class="hljs-type">int32_t</span> *ptr = <span class="hljs-keyword">new</span> <span class="hljs-type">int32_t</span>[<span class="hljs-number">3</span>];<br>		ptr[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>		ptr[<span class="hljs-number">1</span>] = <span class="hljs-number">2</span>;<br>		ptr[<span class="hljs-number">2</span>] = <span class="hljs-number">3</span>;<br>		<span class="hljs-comment">//delete ptr;     //å‡è®¾å¿˜è®°äº†é‡Šæ”¾å†…å­˜</span><br>	&#125;<br>	<span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å¯æƒ³è€ŒçŸ¥ä¼šå æ®æå¤§çš„å†…å­˜ç©ºé—´</p>
<p>æˆ‘ä»¬å°†å…¶æ”¹è¿›ä¸ºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span><br> <br><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">auto_release_ptr</span><br>&#123;<br>	<span class="hljs-keyword">public</span>:<br>		<span class="hljs-built_in">auto_release_ptr</span>(T *t) :<span class="hljs-type">_t</span>(t)&#123;&#125;;<br>		~<span class="hljs-built_in">auto_release_ptr</span>()<br>		&#123;<br>			<span class="hljs-keyword">delete</span> <span class="hljs-type">_t</span>;<br>		&#125;;<br>	 <br>		<span class="hljs-function">T * <span class="hljs-title">getPtr</span><span class="hljs-params">()</span></span><br><span class="hljs-function">		</span>&#123;<br>			<span class="hljs-keyword">return</span> <span class="hljs-type">_t</span>;<br>		&#125;<br>	 <br>	<span class="hljs-keyword">private</span>:<br>		T *<span class="hljs-type">_t</span>;<br>&#125;;<br> <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10000000</span>; i++)<br>	&#123;<br>		<span class="hljs-keyword">auto</span> arp = <span class="hljs-built_in">auto_release_ptr</span>&lt;<span class="hljs-type">int32_t</span>&gt;(<span class="hljs-keyword">new</span> <span class="hljs-type">int32_t</span>[<span class="hljs-number">3</span>]);<br>		<span class="hljs-type">int32_t</span> *ptr = arp.<span class="hljs-built_in">getPtr</span>();<br>		ptr[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>		ptr[<span class="hljs-number">1</span>] = <span class="hljs-number">2</span>;<br>		ptr[<span class="hljs-number">2</span>] = <span class="hljs-number">3</span>;<br>	&#125;<br>	<span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>æ€è·¯ï¼š</strong>å°†ç”³è¯·çš„intæŒ‡é’ˆæ‰˜ç®¡ç»™æ¨¡æ¿ç±»auto_release_ptrï¼Œå†å»å£°æ˜ä¸€ä¸ªæ™®é€šintæŒ‡é’ˆæŒ‡å‘ç”³è¯·çš„å†…å­˜ç©ºé—´ï¼ˆé€šè¿‡æ¥æ”¶ç±»æˆå‘˜å‡½æ•°çš„è¿”å›å€¼å®ç°ï¼‰ï¼Œä»è€Œè®©ptr ä¸ auto_release_ptr æ‹¥æœ‰äº†ç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼Œæ¯æ¬¡forå¾ªç¯è‡ªåŠ¨ææ„é‡Šæ”¾ï¼Œéå¸¸å¦™ã€‚</p>
</li>
<li><p><strong>æ™ºèƒ½æŒ‡é’ˆ</strong></p>
<p><strong>ï¼ˆ1ï¼‰std : : unique_ptr</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//æ™®é€šæŒ‡é’ˆ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">raw_ptr_fun</span><span class="hljs-params">()</span></span>&#123;<br>	Node* n = <span class="hljs-keyword">new</span> Node;<br>	<span class="hljs-comment">//do things with n </span><br>	<span class="hljs-keyword">delete</span> n;<br>&#125;<br><br><span class="hljs-comment">//æ™ºèƒ½æŒ‡é’ˆ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">smart_ptr_fun</span><span class="hljs-params">()</span></span>&#123;<br>	<span class="hljs-function">std::unique_ptr&lt;Node&gt; <span class="hljs-title">n</span><span class="hljs-params">(<span class="hljs-keyword">new</span> node)</span></span>;<br>	<span class="hljs-comment">//do things with n </span><br>	<span class="hljs-comment">//automatically freed!</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>æ— æ³•è¿›è¡Œå·¦å€¼çš„èµ‹å€¼æˆ–èµ‹å€¼æ„é€ ï¼Œä½†å…è®¸ä¸´æ—¶å³å€¼èµ‹å€¼æ„é€ å’Œèµ‹å€¼ï¼ˆç”¨moveè¯­ä¹‰ï¼‰</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">unique_ptr&lt;string&gt; <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-keyword">new</span> string(<span class="hljs-string">&quot;I&#x27;m Li Ming!&quot;</span>))</span></span>;<br><span class="hljs-function">unique_ptr&lt;string&gt; <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-keyword">new</span> string(<span class="hljs-string">&quot;I&#x27;m age 22.&quot;</span>))</span></span>;<br>	<br>cout &lt;&lt; <span class="hljs-string">&quot;p1ï¼š&quot;</span> &lt;&lt; p1.<span class="hljs-built_in">get</span>() &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;p2ï¼š&quot;</span> &lt;&lt; p2.<span class="hljs-built_in">get</span>() &lt;&lt; endl;<br><br><span class="hljs-comment">//p1 = p2;					// errorï¼ç¦æ­¢å·¦å€¼èµ‹å€¼</span><br><span class="hljs-comment">//unique_ptr&lt;string&gt; p3(p2);	// errorï¼ç¦æ­¢å·¦å€¼èµ‹å€¼æ„é€ </span><br><br><span class="hljs-function">unique_ptr&lt;string&gt; <span class="hljs-title">p3</span><span class="hljs-params">(std::move(p1))</span></span>;<br>p1 = std::<span class="hljs-built_in">move</span>(p2);	<span class="hljs-comment">// ä½¿ç”¨moveæŠŠå·¦å€¼è½¬æˆå³å€¼å°±å¯ä»¥èµ‹å€¼äº†</span><br><br>cout &lt;&lt; <span class="hljs-string">&quot;p1 = p2 èµ‹å€¼åï¼š&quot;</span> &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;p1ï¼š&quot;</span> &lt;&lt; p1.<span class="hljs-built_in">get</span>() &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;p2ï¼š&quot;</span> &lt;&lt; p2.<span class="hljs-built_in">get</span>() &lt;&lt; endl;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/04/14/SjMudQh6KBbCa21.png" srcset="/img/loading.gif" lazyload></p>
<div class="note note-warning">
            <p>ğŸ’¡ PS. åœ¨è¿™é‡Œä¹Ÿå¯ä»¥çœ‹åˆ°ï¼ŒæŠŠp2 moveæˆä¸´æ—¶å€¼ä¹‹åï¼Œä¸€èµ‹å€¼ç»™p1ï¼Œå®ƒå°±è¢«é‡Šæ”¾æ‰äº†ï¼Œå†…å­˜åœ°å€ä¸ºnullptr</p>
          </div>



<ul>
<li>æ’å®ƒå¼èµ„æºäº«ç”¨ï¼šä¸¤ä¸ªæŒ‡é’ˆä¸èƒ½æŒ‡å‘åŒä¸€ä¸ªèµ„æº</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp">unique_ptr&lt;string&gt; p1;<br>string *str = <span class="hljs-keyword">new</span> <span class="hljs-built_in">string</span>(<span class="hljs-string">&quot;æ™ºèƒ½æŒ‡é’ˆçš„å†…å­˜ç®¡ç†é™·é˜±&quot;</span>);<br>p1.<span class="hljs-built_in">reset</span>(str);	<span class="hljs-comment">// p1æ‰˜ç®¡stræŒ‡é’ˆ</span><br>&#123;<br>	unique_ptr&lt;string&gt; p2;<br>	p2.<span class="hljs-built_in">reset</span>(str);	<span class="hljs-comment">// p2æ¥ç®¡stræŒ‡é’ˆæ—¶ï¼Œä¼šå…ˆå–æ¶ˆp1çš„æ‰˜ç®¡ï¼Œç„¶åå†å¯¹strçš„æ‰˜ç®¡</span><br>	cout &lt;&lt; <span class="hljs-string">&quot;p2:&quot;</span> &lt;&lt;  *p2 &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">// æ­¤æ—¶p1å·²ç»æ²¡æœ‰æ‰˜ç®¡å†…å®¹æŒ‡é’ˆäº†ï¼Œä¸ºNULLï¼Œåœ¨ä½¿ç”¨å®ƒå°±ä¼šå†…å­˜æŠ¥é”™ï¼</span><br>cout &lt;&lt; <span class="hljs-string">&quot;p1:&quot;</span> &lt;&lt; *p1 &lt;&lt; endl;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/04/14/R8OfldcxjaFIHEV.png" srcset="/img/loading.gif" lazyload></p>
<p><strong>ï¼ˆ2ï¼‰std : : shared_ptr</strong></p>
<p><strong>idea:</strong> è®°å½•å¼•ç”¨ç‰¹å®šå†…å­˜å¯¹è±¡çš„æ™ºèƒ½æŒ‡é’ˆæ•°é‡ï¼Œå½“å¤åˆ¶æˆ–æ‹·è´æ—¶ï¼Œ<strong>å¼•ç”¨è®¡æ•°åŠ 1</strong>ï¼Œå½“æ™ºèƒ½æŒ‡é’ˆææ„æ—¶ï¼Œ<strong>å¼•ç”¨è®¡æ•°å‡1</strong>ï¼Œå¦‚æœè®¡æ•°ä¸ºé›¶ï¼Œä»£è¡¨å·²ç»æ²¡æœ‰æŒ‡é’ˆæŒ‡å‘è¿™å—å†…å­˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±é‡Šæ”¾å®ƒ</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><span class="hljs-keyword">public</span>:<br>	<span class="hljs-built_in">Person</span>() &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;æ„é€ å‡½æ•° \\t &quot;</span> &lt;&lt; endl;<br>	&#125;<br><br>	~<span class="hljs-built_in">Person</span>() &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;ææ„å‡½æ•° \\t &quot;</span> &lt;&lt; endl;<br>	&#125;<br><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>	shared_ptr&lt;Person&gt; sp1;<br><br>	<span class="hljs-function">shared_ptr&lt;Person&gt; <span class="hljs-title">sp2</span><span class="hljs-params">(<span class="hljs-keyword">new</span> Person())</span></span>;<br><br>	<span class="hljs-comment">// è·å–æ™ºèƒ½æŒ‡é’ˆç®¡æ§çš„å…±äº«æŒ‡é’ˆçš„æ•°é‡	use_count()ï¼šå¼•ç”¨è®¡æ•°</span><br>	cout &lt;&lt; <span class="hljs-string">&quot;sp1	use_count() = &quot;</span> &lt;&lt; sp1.<span class="hljs-built_in">use_count</span>() &lt;&lt; endl;<br>	cout &lt;&lt; <span class="hljs-string">&quot;sp2	use_count() = &quot;</span> &lt;&lt; sp2.<span class="hljs-built_in">use_count</span>() &lt;&lt; endl &lt;&lt; endl;<br><br>	<span class="hljs-comment">// å…±äº«,å³sp1å’Œsp2å…±åŒæ‰˜ç®¡åŒä¸€ä¸ªæŒ‡é’ˆ</span><br>	sp1 = sp2;<br><br>	cout &lt;&lt; <span class="hljs-string">&quot;sp1	use_count() = &quot;</span> &lt;&lt; sp1.<span class="hljs-built_in">use_count</span>() &lt;&lt; endl;<br>	cout &lt;&lt; <span class="hljs-string">&quot;sp2	use_count() = &quot;</span> &lt;&lt; sp2.<span class="hljs-built_in">use_count</span>() &lt;&lt; endl &lt;&lt; endl;<br><br>	<span class="hljs-function">shared_ptr&lt;Person&gt; <span class="hljs-title">sp3</span><span class="hljs-params">(sp1)</span></span>;<br>	cout &lt;&lt; <span class="hljs-string">&quot;sp1	use_count() = &quot;</span> &lt;&lt; sp1.<span class="hljs-built_in">use_count</span>() &lt;&lt; endl;<br>	cout &lt;&lt; <span class="hljs-string">&quot;sp2	use_count() = &quot;</span> &lt;&lt; sp2.<span class="hljs-built_in">use_count</span>() &lt;&lt; endl;<br>	cout &lt;&lt; <span class="hljs-string">&quot;sp2	use_count() = &quot;</span> &lt;&lt; sp3.<span class="hljs-built_in">use_count</span>() &lt;&lt; endl;<br>	<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/04/14/cK9a5qX7MnjQHlv.png" srcset="/img/loading.gif" lazyload></p>
<p><strong>ï¼ˆ3ï¼‰std : : weak_ptr</strong></p>
<p>â€‹	TO-DO</p>
</li>
<li><p><strong>æ™ºèƒ½æŒ‡é’ˆåˆå§‹åŒ–æ–¹å¼</strong></p>
<p>å¸¸è§„åˆå§‹åŒ–æ–¹å¼æœ‰ä¸¤ç§ï¼šæ˜¾å¼è°ƒç”¨newã€ä½¿ç”¨make_unique()å‡½æ•°</p>
</li>
</ol>
<p><img src="https://s2.loli.net/2023/04/14/dIVEwpKhf47G5aH.png" srcset="/img/loading.gif" lazyload></p>
<p><strong>Q:</strong> Which is betterï¼Ÿ</p>
<p><strong>A:</strong> std : : make_uniqueå’Œstd : : make_sharedæ›´å¥½ï¼Œå› ä¸º<strong>æ˜¾å¼è°ƒç”¨newä¼šåˆ†é…ä¸¤æ¬¡å†…å­˜</strong>ï¼ˆä¸€æ¬¡ç»™upï¼Œä¸€æ¬¡æ˜¯new Tï¼‰</p>
<hr>
<h1 id="Assignmentï¼šHashMap"><a href="#Assignmentï¼šHashMap" class="headerlink" title="Assignmentï¼šHashMap"></a>Assignmentï¼šHashMap</h1><ol>
<li><p><strong>usingå…³é”®å­—</strong></p>
<p>å¯ç”¨äºè®¾ç½®åˆ«åï¼ŒåŠŸèƒ½ç±»ä¼¼äºtypedef</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">using</span> value_type = std::pair&lt;<span class="hljs-type">const</span> K, M&gt;;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>explicitå…³é”®å­—</strong></p>
<p>ä¿®é¥°classçš„constructorï¼Œä»¤å…¶åªèƒ½æ˜¾å¼å£°æ˜ï¼Œä¸èƒ½éšå¼è½¬æ¢orèµ‹å€¼åˆå§‹åŒ–</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">HashMap</span><span class="hljs-params">(<span class="hljs-type">size_t</span> bucket_count, <span class="hljs-type">const</span> H&amp; hash = H())</span></span>;<br> <br><span class="hljs-function">HashMap&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; <span class="hljs-title">map</span><span class="hljs-params">(<span class="hljs-number">1.0</span>)</span></span>;  <span class="hljs-comment">// double -&gt; int conversion not allowed.</span><br>HashMap&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; map = <span class="hljs-number">1</span>;   <span class="hljs-comment">// copy-initialization, does not compile.</span><br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>æˆå‘˜å‡½æ•°æœ«å°¾åŠ const â€”â€” å¸¸æˆå‘˜å‡½æ•°</strong></p>
<p>constæˆå‘˜å‡½æ•°å¯ä»¥ä½¿ç”¨ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜å˜é‡ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹å®ƒä»¬çš„å€¼ï¼Œè¿™ç§æªæ–½ä¸»è¦ç›®çš„è¿˜æ˜¯ä¿æŠ¤æ•°æ®ã€‚é€šå¸¸å°† getç±»å‹çš„å‡½æ•°ï¼ˆget_valueã€get_sizeã€‚ã€‚ï¼‰è®¾ç½®ä¸ºå¸¸æˆå‘˜å‡½æ•°ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">size_t</span> <span class="hljs-title">size</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span></span>;<br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span></span>;<br></code></pre></td></tr></table></figure>

<p>â€‹	</p>
<div class="note note-warning">
            <p>ğŸ’¡ PS.</p><ol><li>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œå¿…é¡»åœ¨æˆå‘˜å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰å¤„åŒæ—¶åŠ ä¸Š const å…³é”®å­—ã€‚<code>char *getname() const</code>å’Œ<code>char *getname()</code>æ˜¯ä¸¤ä¸ªä¸åŒçš„å‡½æ•°åŸå‹ï¼Œå¦‚æœåªåœ¨ä¸€ä¸ªåœ°æ–¹åŠ  const ä¼šå¯¼è‡´å£°æ˜å’Œå®šä¹‰å¤„çš„å‡½æ•°åŸå‹å†²çªã€‚</li><li>åŒºåˆ†ä¸€ä¸‹ const çš„ä½ç½®ï¼š<ul><li>å‡½æ•°å¼€å¤´çš„ const ç”¨æ¥ä¿®é¥°å‡½æ•°çš„è¿”å›å€¼ï¼Œè¡¨ç¤ºè¿”å›å€¼æ˜¯ const ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½è¢«ä¿®æ”¹ï¼Œä¾‹å¦‚<code>const char * getname()</code></li><li>å‡½æ•°å¤´éƒ¨çš„ç»“å°¾åŠ ä¸Š const è¡¨ç¤ºå¸¸æˆå‘˜å‡½æ•°ï¼Œè¿™ç§å‡½æ•°åªèƒ½è¯»å–æˆå‘˜å˜é‡çš„å€¼ï¼Œè€Œä¸èƒ½ä¿®æ”¹æˆå‘˜å˜é‡çš„å€¼ï¼Œä¾‹å¦‚<code>char * getname() const</code></li></ul></li></ol>
          </div>


</li>
<li><p><strong>noexceptå…³é”®å­—</strong></p>
<p>ç¨‹åºå‘˜åœ¨è¯­ä¹‰å±‚é¢å£°æ˜â€œæˆ‘ä¿è¯è¿™ä¸ªå‡½æ•°ä¸ä¼šå¼‚å¸¸ï¼Œç¼–è¯‘å™¨ä½ ä¸ç”¨æ£€æŸ¥äº†â€ï¼Œä¹‹åç¼–è¯‘å™¨å°±ä¸ä¼šå¯¹è¯¥å‡½æ•°è¿›è¡Œå¼‚å¸¸æ£€æŸ¥ï¼Œä¹Ÿæ²¡åŠæ³•å®æ–½try-catchæ“ä½œ</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func_not_throw</span><span class="hljs-params">()</span> <span class="hljs-keyword">noexcept</span> </span>&#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-number">1</span>;<br>		<span class="hljs-comment">// noexceptå‡½æ•°ä¸­æœ¬ä¸åº”æœ‰throwï¼Œæ²¡æ„ä¹‰ï¼Œä½†ç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥æ˜¯å¦æœ‰throw</span><br>		<span class="hljs-comment">// æ‰€ä»¥ç¼–è¯‘é€šè¿‡ï¼Œä¸ä¼šæŠ¥é”™ï¼ˆå¯èƒ½ä¼šæœ‰è­¦å‘Šï¼‰</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-built_in">func_not_throw</span>(); <span class="hljs-comment">// ç›´æ¥ terminateï¼Œä¸ä¼šè¢« catch</span><br>    &#125; <span class="hljs-built_in">catch</span> (<span class="hljs-type">int</span>) &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;catch int&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>æ³¨æ„ï¼š</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br> <br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br> <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CTest</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>	<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span><br><span class="hljs-function">	</span>&#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;const&quot;</span> &lt;&lt; endl;<br>	&#125;<br> <br>	<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span><br><span class="hljs-function">	</span>&#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;normal&quot;</span> &lt;&lt; endl;<br>	&#125;<br>&#125;;<br> <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>	CTest a;<br>	a.<span class="hljs-built_in">show</span>();<br> <br>	<span class="hljs-type">const</span> CTest b;<br>	b.<span class="hljs-built_in">show</span>();<br> <br>	<span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/04/14/48HvQ9oENy1ksPd.png" srcset="/img/loading.gif" lazyload></p>
<p>è¿™ä¸¤ä¸ªshowå‡½æ•°å¯ä¸æ˜¯é‡è½½ï¼<strong>é‡è½½å‡½æ•°çš„å½¢å‚å¿…é¡»ä¸åŒï¼ï¼</strong>è¿™ä¿©å°±ä¸æ˜¯åŒä¸€ä¸ªå‡½æ•°åŸå‹ï¼ˆå› ä¸ºåŠ äº†constï¼Œæ˜¯å¸¸æˆå‘˜å‡½æ•°ï¼‰</p>
<p>é‚£ä¹ˆè°ƒç”¨çš„æ—¶å€™å¦‚ä½•åŒºåˆ†è¿™ä¿©æï¼Ÿ</p>
<p>å®ƒä»¬å„è‡ªè¢«è°ƒç”¨çš„æ—¶æœºä¸ºï¼š<strong>å¦‚æœå®šä¹‰çš„å¯¹è±¡æ˜¯å¸¸å¯¹è±¡ï¼Œåˆ™è°ƒç”¨çš„æ˜¯constæˆå‘˜å‡½æ•°ï¼Œå¦‚æœå®šä¹‰çš„å¯¹è±¡æ˜¯éå¸¸å¯¹è±¡ï¼Œåˆ™è°ƒç”¨é‡è½½çš„éconstæˆå‘˜å‡½æ•°ã€‚</strong></p>
<div class="note note-warning">
            <p> ğŸ’¡ PS. ä¸è¿‡ä»å¦ä¸€ä¸ªè§’åº¦æ¥ç†è§£ï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒä¿©çœ‹æˆé‡è½½ â€”â€” é¦–å…ˆç†è§£ä¸‹å‡½æ•°ç­¾åï¼šå®ƒåŒ…å«ç€ä¸€ä¸ªå‡½æ•°çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬<strong>å‡½æ•°åã€å‚æ•°ç±»å‹ã€å‚æ•°ä¸ªæ•°ã€é¡ºåºä»¥åŠå®ƒæ‰€åœ¨çš„ç±»å’Œå‘½åç©ºé—´ï¼Œ</strong>ä¸¤ä¸ªå‡½æ•°åªæœ‰åœ¨ç­¾åä¸åŒæ—¶æ‰èƒ½è¢«åŒºåˆ†ã€‚<br>é‚£ä¸Šé¢ä¸¤ä¸ªshow( )çš„ç­¾ååˆ°åº•å“ªé‡Œä¸åŒäº†æï¼Ÿ ç­”æ¡ˆæ˜¯å‚æ•°ç±»å‹ï¼Œæ¯ä¸ªæˆå‘˜å‡½æ•°çš„å‚æ•°ä¸­å…¶å®è‡ªå¸¦thisæŒ‡é’ˆï¼Œåªä¸è¿‡è—èµ·æ¥äº†ï¼Œè°è°ƒç”¨æˆå‘˜å‡½æ•°ï¼Œthis å°±æŒ‡å‘è°ã€‚<strong>è€Œæˆå‘˜å‡½æ•°å°¾å·´ä¸Šçš„constï¼Œå®è´¨ä¿®é¥°çš„æ˜¯thisæŒ‡é’ˆï¼</strong> å½“aè°ƒç”¨showæ–¹æ³•æ—¶ï¼Œå‡½æ•°ç­¾åä¸ºshow(a){}ï¼Œå³aä¼ ç»™thisæŒ‡é’ˆï¼Œä¸€çœ‹ï¼Œè¯¶ï¼aä¸ºéå¸¸å¯¹è±¡ï¼Œå¯¹åº”æ™®é€šthisæŒ‡é’ˆï¼Œå³éconstç‰ˆæœ¬çš„show()ï¼›båŒç†ã€‚</p>
          </div>


</li>
<li><p><strong>typenameå…³é”®å­—ä½œç”¨</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Map, <span class="hljs-type">bool</span> IsConst&gt;<br><span class="hljs-keyword">typename</span> HashMapIterator&lt;Map, IsConst&gt;::reference HashMapIterator&lt;Map, IsConst&gt;::<span class="hljs-keyword">operator</span>*() <span class="hljs-type">const</span> &#123;<br>    <span class="hljs-keyword">return</span> _node-&gt;value; <br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><p>ä½œä¸ºç±»å‹å£°æ˜ï¼Œæ•ˆæœå®Œå…¨ç­‰åŒäºclass â€”â€” ä»£ç ä¸­çš„typename Mapç­‰åŒäºclass Mapï¼Œå®ƒä¿©éƒ½æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œâ€œæˆ‘åé¢è·Ÿç€çš„è¿™ä¸ªæ˜¯ä¸ªç±»å‹åç§°ï¼Œè€Œä¸æ˜¯æˆå‘˜å˜é‡æˆ–æˆå‘˜å‡½æ•°â€ã€‚ï¼ˆè¿™å¥½åƒä¹Ÿèƒ½æ˜ è¯â€œæ¨¡æ¿å‡½æ•°åœ¨å®ä¾‹åŒ–åæ‰ä¼šè¢«ç¼–è¯‘â€ï¼‰</p>
</li>
<li><p>ä½œä¸º<strong>ä¿®é¥°å…³é”®å­—ï¼š</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; proto)</span></span>&#123;<br>    <span class="hljs-function">T::const_iterator <span class="hljs-title">it</span><span class="hljs-params">(proto.begin())</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>motivationï¼š</strong>è™½ç„¶äººç±»ç¼–ç¨‹è€…ä¸€çœ¼å°±çŸ¥é“const_iteratoræ˜¯ä¸ªç±»å‹åç§°ï¼Œä½†ç¼–è¯‘å™¨ä¸çŸ¥é“å‘€ï¼Œä¸‡ä¸€å®ƒæ˜¯ä¸ªå˜é‡å‘¢ï¼Ÿåœ¨æ¨¡æ¿å®ä¾‹åŒ–ä¹‹å‰ï¼Œå®Œå…¨æ²¡æœ‰åŠæ³•æ¥åŒºåˆ†å®ƒä»¬ï¼Œæ‰€ä»¥è¿™ä¸ªå†™æ³•æ˜¯ä¼šerrorçš„ï¼ æ€ä¹ˆåŠæï¼Ÿ è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨typenameå…³é”®å­—æ¥ä¿®é¥°ï¼Œç¼–è¯‘å™¨æ‰ä¼šå°†è¯¥åç§°å½“æˆæ˜¯ç±»å‹</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">typename</span> T::const_iterator <span class="hljs-title">it</span><span class="hljs-params">(proto.begin())</span></span>;<br></code></pre></td></tr></table></figure>

<p>è¿™æ ·ç¼–è¯‘å™¨å°±å¯ä»¥ç¡®å®šT: :const_iteratoræ˜¯ä¸€ä¸ªç±»å‹ï¼Œè€Œä¸å†éœ€è¦ç­‰åˆ°å®ä¾‹åŒ–æ—¶æœŸæ‰èƒ½ç¡®å®šï¼Œå› æ­¤æ¶ˆé™¤äº†å‰é¢æåˆ°çš„æ­§ä¹‰ã€‚</p>
<div class="note note-warning">
            <p>ğŸ’¡ PS. æ€»ç»“ï¼šåŒæ—¶ä½¿ç”¨æ¨¡æ¿ç±»Tå’ŒåŸŸè§£æç¬¦: : æ—¶ï¼Œå°±å¾—åŠ typename</p>
          </div></li>
</ul>
</li>
<li><p>æ¨¡æ¿ç±»ä¸­çš„æˆå‘˜å‡½æ•°ï¼ˆå¾€å¾€ä¹Ÿæ˜¯æ¨¡æ¿å‡½æ•°ï¼‰çš„å…·ä½“å®ç°é€šå¸¸ä¹Ÿä¼šæ”¾åœ¨.hä¸­ï¼Œé™¤éå‡½æ•°å¤ªå¤šå¤ªé•¿</p>
</li>
<li><p>ä¸¤ä¸ªæŒ‡é’ˆç›¸å‡ &#x3D; ä¸¤æŒ‡é’ˆçš„åœ°å€å·®å€¼&#x2F;sizeof(æ•°æ®ç±»å‹)ï¼Œå³å¾—åˆ°çš„ç»“æœå°±æ˜¯ä¸¤æŒ‡é’ˆä¹‹é—´é—´éš”çš„å…ƒç´ ä¸ªæ•°</p>
<p>æ³¨æ„ï¼š ä¸éœ€è¦äººä¸ºæ‰‹åŠ¨å»é™¤sizeofå“ˆï¼å‡å·è‡ªåŠ¨ä¼šå®Œæˆè¿™ä¸ªæ“ä½œï¼ˆcå’Œcppä¸­éƒ½æ˜¯ï¼‰</p>
</li>
<li><p><strong>è¿ç®—ç¬¦é‡è½½</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iomanip&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//ç§’è¡¨ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">stopwatch</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">stopwatch</span>(): <span class="hljs-built_in">m_min</span>(<span class="hljs-number">0</span>), <span class="hljs-built_in">m_sec</span>(<span class="hljs-number">0</span>)&#123; &#125;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setzero</span><span class="hljs-params">()</span></span>&#123; m_min = <span class="hljs-number">0</span>; m_sec = <span class="hljs-number">0</span>; &#125;<br>    <span class="hljs-function">stopwatch <span class="hljs-title">run</span><span class="hljs-params">()</span></span>;  <span class="hljs-comment">// è¿è¡Œ</span><br>    stopwatch <span class="hljs-keyword">operator</span>++();  <span class="hljs-comment">//++iï¼Œå‰ç½®å½¢å¼</span><br>    stopwatch <span class="hljs-keyword">operator</span>++(<span class="hljs-type">int</span> n);  <span class="hljs-comment">//i++ï¼Œåç½®å½¢å¼</span><br>    <span class="hljs-keyword">friend</span> ostream &amp; <span class="hljs-keyword">operator</span>&lt;&lt;( ostream &amp;, <span class="hljs-type">const</span> stopwatch &amp;);<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> m_min;  <span class="hljs-comment">//åˆ†é’Ÿ</span><br>    <span class="hljs-type">int</span> m_sec;  <span class="hljs-comment">//ç§’é’Ÿ</span><br>&#125;;<br><br><span class="hljs-function">stopwatch <span class="hljs-title">stopwatch::run</span><span class="hljs-params">()</span></span>&#123;<br>    ++m_sec;<br>    <span class="hljs-keyword">if</span>(m_sec == <span class="hljs-number">60</span>)&#123;<br>        m_min++;<br>        m_sec = <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>&#125;<br><br>stopwatch stopwatch::<span class="hljs-keyword">operator</span>++()&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">run</span>();<br>&#125;<br><br>stopwatch stopwatch::<span class="hljs-keyword">operator</span>++(<span class="hljs-type">int</span> n)&#123;<br>    stopwatch s = *<span class="hljs-keyword">this</span>;<br>    <span class="hljs-built_in">run</span>();<br>    <span class="hljs-keyword">return</span> s;<br>&#125;<br><br>ostream &amp;<span class="hljs-keyword">operator</span>&lt;&lt;( ostream &amp; out, <span class="hljs-type">const</span> stopwatch &amp; s)&#123;<br>    out&lt;&lt;<span class="hljs-built_in">setfill</span>(<span class="hljs-string">&#x27;0&#x27;</span>)&lt;&lt;<span class="hljs-built_in">setw</span>(<span class="hljs-number">2</span>)&lt;&lt;s.m_min&lt;&lt;<span class="hljs-string">&quot;:&quot;</span>&lt;&lt;<span class="hljs-built_in">setw</span>(<span class="hljs-number">2</span>)&lt;&lt;s.m_sec;<br>    <span class="hljs-keyword">return</span> out;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    stopwatch s1, s2;<br><br>    s1 = s2++;<br>    cout &lt;&lt; <span class="hljs-string">&quot;s1: &quot;</span>&lt;&lt; s1 &lt;&lt;endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;s2: &quot;</span>&lt;&lt; s2 &lt;&lt;endl;<br>    s1.<span class="hljs-built_in">setzero</span>();<br>    s2.<span class="hljs-built_in">setzero</span>();<br><br>    s1 = ++s2;<br>    cout &lt;&lt; <span class="hljs-string">&quot;s1: &quot;</span>&lt;&lt; s1 &lt;&lt;endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;s2: &quot;</span>&lt;&lt; s2 &lt;&lt;endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>C++è¿ç®—ç¬¦é‡è½½ï¼Œæœ¬è´¨ä¸Šç­‰äºå®šä¹‰ä¸€ä¸ªæˆå‘˜å‡½æ•°(å®é™…ä¸Šä¹Ÿå¯èƒ½æ˜¯å…¨å±€å‡½æ•°)ã€‚ä¾‹å¦‚a+bï¼Œæœ¬è´¨ä¸Šç­‰åŒäºè°ƒç”¨å‡½æ•°<strong>ã€Œa.operator+(b)ã€</strong>ï¼Œè¯¥å‡½æ•°çš„åå­—å«ã€Œoperator+ã€ ++çš„é‡è½½åˆ†ä¸ºå‰ç½®å’Œåç½®æƒ…å†µï¼Œa &#x3D; ++b;(å‰ç½®)ï¼Œ a &#x3D; b++;(åç½®)ã€‚å› ä¸ºç¬¦å·ä¸€æ ·ï¼Œæ‰€ä»¥ç»™åç½®ç‰ˆæœ¬åŠ ä¸€ä¸ªintå½¢å‚ä½œä¸ºåŒºåˆ†ï¼Œè¿™ä¸ªå½¢å‚æ˜¯0ï¼Œä½†æ˜¯åœ¨å‡½æ•°ä½“ä¸­æ˜¯ç”¨ä¸åˆ°çš„ï¼Œåªæ˜¯ä¸ºäº†åŒºåˆ†å‰ç½®åç½®ã€‚ è‡³äºä¸ºå•¥åŠ äº†ä¸ªå½¢å‚å°±èƒ½åŒºåˆ†å‰åç¼€ï¼Œæ²¡æƒ³æ‡‚ï¼Œä¹Ÿæ²¡æŸ¥åˆ°èµ„æ–™</p>
</li>
<li><p><strong>thisæŒ‡é’ˆ</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> K, <span class="hljs-keyword">typename</span> M, <span class="hljs-keyword">typename</span> H&gt;<br>HashMap&lt;K, M, H&gt;::~<span class="hljs-built_in">HashMap</span>() &#123;<br>    <span class="hljs-built_in">clear</span>();<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™é‡Œè°ƒç”¨clear()ç”¨ä¸ç”¨åŠ thisæŒ‡é’ˆï¼Ÿ ç­”æ¡ˆæ˜¯å¯åŠ å¯ä¸åŠ ï¼Œç¼–è¯‘å™¨éƒ½ä¼šéšå¼è°ƒç”¨</p>
<p>Q: ä»€ä¹ˆæ—¶å€™thisæŒ‡é’ˆæ˜¯å¿…ä¸å¯å°‘çš„æï¼Ÿ </p>
<p>A: å½“ä½ åœ¨å¯¹è±¡æ–¹æ³•é‡Œéœ€è¦<strong>æ˜ç¡®</strong>ä½¿ç”¨è‡ªå·±çš„æ—¶å€™ï¼Œæ¯”å¦‚åŒºåˆ†åŒåçš„å½¢å‚å’Œæˆå‘˜å˜é‡</p>
</li>
<li><p>å½“ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¸ºå¼•ç”¨ç±»å‹æ—¶ï¼Œ<strong>ä¸è¦return æŸä¸ªåœ¨stackä¸Šçš„å˜é‡çš„å¼•ç”¨ï¼</strong>ï¼ˆå¦åˆ™è¯¥å‡½æ•°ä¸€é€€å‡ºï¼Œstackå°±é‡Šæ”¾ï¼Œå¼•ç”¨å°±æ‰äº†ï¼‰</p>
</li>
<li><p><strong>éå†ç±»çš„å®ä¾‹åŒ–å¯¹è±¡ï¼ˆè‡ªå®šä¹‰ç±»çš„è¿­ä»£å™¨ï¼‰</strong></p>
</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(<span class="hljs-type">const</span> HashMap&lt;K, M, H&gt;&amp; lhs, <span class="hljs-type">const</span> HashMap&lt;K, M, H&gt;&amp; rhs) &#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> [key, mapped] : lhs)&#123;<br>        ã€‚ã€‚ã€‚<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>Q: lhsæ˜¯è‡ªå®šä¹‰çš„HashMapç±»ï¼Œå…¶æˆå‘˜å˜é‡ä¸åªæ˜¯è£…æœ‰&lt;key, mapped&gt;çš„é“¾è¡¨ï¼Œè¿˜æœ‰å„ç§int sizeã€int load_factorç­‰å±æ€§å•Šï¼Œä¸ºå•¥å¯ä»¥ç›´æ¥ç”¨ : è¿›è¡Œrange based for loopæï¼Ÿæˆ–è€…è¯´ï¼Œä¸ºå•¥åªä¼šå¾ªç¯åˆ°æƒ³è¦çš„é“¾è¡¨ï¼Œè€Œä¸ä¼šè®¿é—®å…¶å®ƒæˆå‘˜å˜é‡æï¼Ÿ</p>
<p>A: ä¹‹æ‰€ä»¥ä¼šæœ‰ä¸Šè¿°è¯¯åŒºï¼Œ<strong>æ˜¯å› ä¸ºæŠŠrange basedå¾ªç¯å½“æˆäº†ç¼–è¯‘å™¨å†…ç½®è¿ç®—ç¬¦ï¼Œäº‹å®ä¸Šæ˜¯è‡ªå·±è¦ä¸ºè¯¥ç±»å®šä¹‰ä¸€ä¸ªiteratorç±»ï¼</strong></p>
<p>range basedçš„ : ç¬¦å·åªæ˜¯ä¸€ç§ç®€ç•¥å†™æ³•ï¼Œå®ƒçš„æºç å®ç°å¤§æ¦‚ä¸ºï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span> ( range_declaration : range_expression) loop_statement<br>&#123;  <br>    <span class="hljs-keyword">auto</span> &amp;&amp; __range = range_expression ;   <br>    <span class="hljs-keyword">auto</span> __begin = <span class="hljs-built_in">begin_expr</span>(__range);   <br>    <span class="hljs-keyword">auto</span> __end = <span class="hljs-built_in">end_expr</span>(__range);   <br>    <span class="hljs-keyword">for</span> (;__begin != __end; ++__begin) &#123;  <br>        range_declaration = *__begin;   <br>        loop_statement   <br>    &#125;   <br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç”±æ­¤å¯è§ï¼Œè‡ªå®šä¹‰çš„iteratorç±»è‡³å°‘è¦æœ‰5ä¸ªåŠŸèƒ½ï¼š</p>
<ul>
<li>begin( )</li>
<li>end( )</li>
<li>é‡è½½++ã€*ã€! &#x3D;ä¸‰ä¸ªè¿ç®—ç¬¦</li>
</ul>
<p>å…¶ä¸­begin( )ã€end( )è¿”å›ç±»å‹å°±æ˜¯iterator</p>
<p>ç°åœ¨å°±å¯ä»¥ç†è§£ä¸ºå•¥å¯ç”¨range basedå¾ªç¯è·å–è‡ªå®šä¹‰ç±»ä¸­æƒ³è¦çš„æ•°æ®äº† â€”â€” iteratoråŠŸèƒ½å…¨æ˜¯ç”¨æˆ·è‡ªå·±å®šä¹‰çš„ï¼Œæƒ³è·å–å•¥å°±è·å–å•¥æ</p>
<ol start="13">
<li><strong>Q: å³å€¼å¼•ç”¨çš„ç±»å¯¹è±¡çš„å±æ€§ä¹Ÿæ˜¯å³å€¼å—ï¼Ÿ</strong></li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//ç§»åŠ¨æ„é€ å‡½æ•°</span><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> K, <span class="hljs-keyword">typename</span> M, <span class="hljs-keyword">typename</span> H&gt;<br>HashMap&lt;K, M, H&gt;::<span class="hljs-built_in">HashMap</span>(HashMap&amp;&amp; rhs):<br>    _size&#123;rhs._size&#125;,<br>    _hash_function&#123;rhs._hash_function&#125;,<br>    _buckets_array&#123;rhs.<span class="hljs-built_in">bucket_count</span>(), <span class="hljs-literal">nullptr</span>&#125; &#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">bucket_count</span>(); i++)&#123;<br>        _buckets_array[i] = rhs._buckets_array[i];<br>        rhs._buckets_array[i] = <span class="hljs-literal">nullptr</span>;<br>    &#125;<br>    rhs._size = <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>A: å°†ç±»å¯¹è±¡ç”¨move()å¼ºè½¬ä¸ºå³å€¼ï¼Œå¹¶ä¸å½±å“ç±»ä¸­æˆå‘˜å˜é‡çš„å·¦å³å€¼å±æ€§ï¼Œè¯¥æ˜¯å•¥è¿˜æ˜¯å•¥</p>
<ol start="14">
<li><p><strong>å¯¹ä¸Šé¢è¿™ä¸ªé—®é¢˜çš„è¿›ä¸€æ­¥æ·±å±‚ç†è§£ï¼š</strong></p>
<p>Q: è¢«move()è¿‡çš„å˜é‡ä¼šè¢«ç¼–è¯‘å™¨è‡ªåŠ¨ç»™é”€æ¯å—ï¼Ÿå¦‚æœä¼šï¼Œé‚£ä¸ºå•¥è¿˜è¦æ‰‹åŠ¨è®©rhs._buckets_array[i] æŒ‡å‘nullptrï¼Ÿå¦‚æœä¸ä¼šï¼Œé‚£å¼ºè½¬å³å€¼æœ‰å•¥æ„ä¹‰å•Šï¼Ÿ</p>
<p>A: å˜é‡ä¼šè¢«æ€ä¹ˆå¤„ç†ï¼Œä¸å®ƒæ˜¯å¦è¢«move()è¿‡æ²¡åŠæ¯›é’±å…³ç³»ï¼Œ<strong>move()å¹¶ä¸æ”¹å˜å˜é‡æœ¬èº«ï¼Œåªæ˜¯é¢å¤–æä¾›äº†ä¸€ä¸ªreturnçš„å³å€¼</strong>ï¼Œè¿™ä¸€ç‚¹çœ‹æºç å³å¯æ˜ç™½</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// FUNCTION TEMPLATE move</span><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">class</span> <span class="hljs-title class_">_Ty</span>&gt;<br><span class="hljs-function"><span class="hljs-type">remove_reference_t</span>&lt;_Ty&gt;&amp;&amp; <span class="hljs-title">move</span><span class="hljs-params">(_Ty&amp;&amp; _Arg)</span> <span class="hljs-keyword">noexcept</span> </span>&#123; <br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-type">remove_reference_t</span>&lt;_Ty&gt;&amp;&amp;&gt;(_Arg);<br>&#125;<br><span class="hljs-comment">//åªæ˜¯æŠŠè¿”å›å€¼ç”¨static_castå¼ºåˆ¶è½¬æ¢æˆå³å€¼ï¼Œä½†ä¼ å…¥çš„åŸå˜é‡è¯¥æ˜¯å•¥è¿˜æ˜¯å•¥</span><br></code></pre></td></tr></table></figure>

<p>é‚£move()çš„æ„ä¹‰æ˜¯å•¥æ â€”â€” <strong>å¤šæä¾›ä¸€ç§æ•°æ®ç±»å‹ï¼Œç”¨äºé‡è½½å‡½æ•°çš„å½¢å‚åŒ¹é…</strong>ã€‚ è¯´ç™½äº†ï¼Œå°±æ˜¯<strong>æ‰‹åŠ¨å¸®åŠ©ç¼–è¯‘å™¨é€‰æ‹©é‡è½½å‡½æ•°ï¼ŒåŒæ—¶å‘ç¼–è¯‘å™¨å‘èª“å†ä¹Ÿä¸ç¢°è¿™ä¸ªå¯¹è±¡</strong>ï¼ é‚£è¿™ä¸ªä½œç”¨çš„motivationåˆæ˜¯å•¥æ â€”â€” è‹¥æ²¡æœ‰å³å€¼å¼•ç”¨ï¼Œé‚£æ‹·è´å‡½æ•°å°±è¦åˆ†æˆdeep_copy()å’Œshallow_copy()ä¸¤ä¸ªç‰ˆæœ¬æ¥å†™ï¼Œä¸”æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨æ˜¾å¼è°ƒç”¨ â€”â€” è¿™æ—¢éº»çƒ¦ï¼Œåˆå®¹æ˜“å‡ºé”™ï¼›ä½†åˆ©ç”¨é‡è½½å†™æˆcopy(const T&amp; val)å’Œcopy(T&amp;&amp; val)åï¼Œå°±å¯ä»¥è®©ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ã€‚è€Œè‹¥ç”¨æˆ·è‡ªå·±å‘ç°ï¼Œè¯¶ï¼è¿™ä¸ªæŒ‡é’ˆaè™½ç„¶æ˜¯å·¦å€¼ï¼Œä½†æˆ‘ä¹‹åä¸ç”¨äº†ï¼Œå¯ä»¥ç›´æ¥æµ…æ‹·è´ï¼Œokï¼Œé‚£ç”¨move()å¼ºè½¬ä¸€æ¬¡å³å¯ï¼Œå³æ‰€è°“çš„â€œæ‰‹åŠ¨å¸®ç¼–è¯‘å™¨é€‰æ‹©é‡è½½å‡½æ•°â€ã€‚ å›åˆ°ä¸€å¼€å§‹çš„é—®é¢˜ï¼Œç»move()çš„å˜é‡ä¼šè¢«é”€æ¯å’©ï¼Ÿ é‚£å¾—çœ‹ç§»åŠ¨æ„é€ å‡½æ•°&#x2F;ç§»åŠ¨èµ‹å€¼æ„é€ å‡½æ•°æ˜¯å’‹å®ç°çš„ï¼šåœ¨ä¸Šé¢HashMapçš„é‚£ä¸ªç§»åŠ¨æ„é€ å‡½æ•°ä¸­ï¼Œæ‰‹åŠ¨é‡Šæ”¾äº†æŒ‡é’ˆå¹¶è®©sizeæ¸…é›¶ï¼ˆè¿™ä¹Ÿæ˜¯ç¬¦åˆå®é™…å†™ä»£ç çš„æ€è·¯çš„ï¼Œæ—¢ç„¶è®¤å®šäº†â€œè¿™ä¸ªå¯¹è±¡ä¸ä¼šå†ç¢°â€ï¼Œé‚£å°±åº”è¯¥é‡Šæ”¾å®ƒï¼Œç•™ç€æ—¢å ç©ºé—´ã€åˆæœ‰ä¿®æ”¹å†…å­˜çš„é£é™©ï¼‰ï¼›åä¹‹ï¼Œå¦‚æœç§»åŠ¨æ„é€ å‡½æ•°ä¸­æ²¡é‡Šæ”¾å³å€¼ï¼Œé‚£å®ƒå°±åŸå°ä¸åŠ¨åœ°åœ¨é‚£å„¿ â€”â€” è¯´åˆ°åº•ï¼Œè¿˜æ˜¯<strong>ä¸å˜é‡æ˜¯å·¦å€¼&#x2F;å³å€¼æœ¬èº«æ²¡åŠæ¯›é’±å…³ç³»ï¼Œè€Œæ˜¯å–å†³äºSMFä¸­æ€ä¹ˆå»å¤„ç†è¿™ä¸ªå˜é‡</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test_fun</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp; val)</span></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;value: &quot;</span> &lt;&lt; val&lt;&lt; <span class="hljs-string">&quot;, type: å·¦å€¼&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test_fun</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp;&amp; val)</span></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;value: &quot;</span> &lt;&lt; val&lt;&lt; <span class="hljs-string">&quot;, type: å³å€¼&quot;</span> &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> a = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> b = <span class="hljs-built_in">move</span>(a);<br>    <span class="hljs-built_in">test_fun</span>(a); <span class="hljs-comment">//aæ²¡æœ‰è¢«é”€æ¯</span><br>    <span class="hljs-built_in">test_fun</span>(b);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/04/14/H3Y1s7jSPFquXCK.png" srcset="/img/loading.gif" lazyload></p>
</li>
</ol>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%A0%B8%E5%BF%83%E7%A7%91%E6%8A%80%E7%9C%8B%E7%BE%8E%E5%B8%9D/" class="category-chain-item">æ ¸å¿ƒç§‘æŠ€çœ‹ç¾å¸</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/c/">#c++</a>
      
        <a href="/tags/%E6%96%AF%E5%9D%A6%E7%A6%8F/">#æ–¯å¦ç¦</a>
      
        <a href="/tags/hashmap/">#hashmap</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>ã€ŠCS106Lç¬”è®°ã€‹</div>
      <div>https://qlhhahaha.github.io/2023/04/14/ã€ŠCS106Lç¬”è®°ã€‹/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>qlhhahaha</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2023å¹´4æœˆ14æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/04/14/%E3%80%8ACS61C%E7%AC%94%E8%AE%B0%E3%80%8B/" title="ã€ŠCS61Cç¬”è®°ã€‹">
                        <span class="hidden-mobile">ã€ŠCS61Cç¬”è®°ã€‹</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="waline"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#waline', function() {
      Fluid.utils.createCssLink('https://lib.baomitu.com/waline/2.14.1/waline.min.css')
      Fluid.utils.createScript('https://lib.baomitu.com/waline/2.14.1/waline.min.js', function() {
        var options = Object.assign(
          {"serverURL":"https://waline-test-woad-six.vercel.app/","path":"window.location.pathname","meta":["nick","mail","link"],"requiredMeta":["nick"],"lang":"zh-CN","emoji":["https://unpkg.com/@waline/emojis@1.1.0/tieba"],"dark":"html[data-user-color-scheme=\"dark\"]","wordLimit":0,"pageSize":10,"placeholder":"ä½ æƒ³å¯¹é’±åŠ›æ™–è¯´ä»€ä¹ˆæ?","avatar":"retro","highlight":true,"avatarCDN":"","avatarForce":false,"requiredFields":[]},
          {
            el: '#waline',
            path: window.location.pathname
          }
        )
        Waline.init(options);
        Fluid.utils.waitElementVisible('#waline .vcontent', () => {
          var imgSelector = '#waline .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        æ€»è®¿é—® 
        <span id="leancloud-site-pv"></span>
         æ¬¡
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        æ€»è®¿å®¢ 
        <span id="leancloud-site-uv"></span>
         äºº
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
